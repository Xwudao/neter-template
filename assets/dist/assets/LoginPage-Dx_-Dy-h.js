import{j as e,D as m,F as t,B as d}from"./ui-Dp8jQD_-.js";import{c as g,b as p,e as x,d as o,p as h,o as j,f}from"./index-CARAERQ_.js";import{c as L}from"./fileRoute-Dq_AJ29d.js";import"./libs-CzfklvxJ.js";const{Input:n}=t,b=()=>{const{toLogin:r}=g(),i=p(),{mutate:l,isPending:c}=x({mutationFn:h}),u=s=>{l(s,{onSuccess:j("登录成功",a=>{r({...a.user,token:a.token},()=>{setTimeout(()=>{i({to:"/admin"})},0)})}),onError:f()})};return e.jsx("section",{className:o.loginPage,children:e.jsxs("div",{className:o.loginBox,children:[e.jsx("h1",{className:o.loginTitle,children:"系统登录"}),e.jsx(m,{margin:10}),e.jsxs(t,{onSubmit:s=>u(s),children:[e.jsx(n,{label:"用户名",placeholder:"请输入用户名",field:"username",rules:[{required:!0,message:"必填"}]}),e.jsx(n,{label:"密码",placeholder:"请输入密码",field:"password",rules:[{required:!0,message:"必填"}],mode:"password"}),e.jsx(d,{type:"primary",htmlType:"submit",block:!0,loading:c,children:"登录"})]})]})})},k=L("/login")({component:b});export{k as default};
