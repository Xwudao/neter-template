const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminPage-Cpy3gmqc.js","assets/ui-Dp8jQD_-.js","assets/libs-CzfklvxJ.js","assets/ui-CZZGeOJ5.css","assets/fileRoute-Dq_AJ29d.js","assets/LoginPage-Dx_-Dy-h.js"])))=>i.map(i=>d[i]);
var cs=e=>{throw TypeError(e)};var gr=(e,t,r)=>t.has(e)||cs("Cannot "+r);var m=(e,t,r)=>(gr(e,t,"read from private field"),r?r.call(e):t.get(e)),R=(e,t,r)=>t.has(e)?cs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),j=(e,t,r,s)=>(gr(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),E=(e,t,r)=>(gr(e,t,"access private method"),r);var Qt=(e,t,r,s)=>({set _(n){j(e,t,n,r)},get _(){return m(e,t,s)}});import{j as c,T as he,c as $t,P as Re,D as sn,B as O,I as mi,F as fe,S as Lt,a as qr,b as qt,d as zr,e as Br,f as Kr,g as Hr,h as xe,i as pi,k as gi,u as yi,l as nn,m as vi,n as bi,o as xi,p as Qr,q as Si,r as wi,s as _i,t as ls,v as ji}from"./ui-Dp8jQD_-.js";import{f as Ci,r as _,g as Vr,aj as Ri,R as Pi,B as Ei,C as us,D as Fi,J as Ii,ak as Li,al as Oi,am as Mi,H as Ti,an as ki,K as Ai,ao as Di,ap as Ni,aq as on,ar as Ui}from"./libs-CzfklvxJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var an,ds=Ci;an=ds.createRoot,ds.hydrateRoot;/*! js-cookie v3.0.5 | MIT */function Vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)e[s]=r[s]}return e}var $i={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Cr(e,t){function r(n,i,o){if(!(typeof document>"u")){o=Vt({},t,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,o[u]!==!0&&(a+="="+o[u].split(";")[0]));return document.cookie=n+"="+e.write(i,n)+a}}function s(n){if(!(typeof document>"u"||arguments.length&&!n)){for(var i=document.cookie?document.cookie.split("; "):[],o={},a=0;a<i.length;a++){var u=i[a].split("="),l=u.slice(1).join("=");try{var h=decodeURIComponent(u[0]);if(o[h]=e.read(l,h),n===h)break}catch{}}return n?o[n]:o}}return Object.create({set:r,get:s,remove:function(n,i){r(n,"",Vt({},i,{expires:-1}))},withAttributes:function(n){return Cr(this.converter,Vt({},this.attributes,n))},withConverter:function(n){return Cr(Vt({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var rr=Cr($i,{path:"/"});const hs=document.body,qi=()=>{const[e,t]=_.useState(rr.get("is_dark")==="true"),r=()=>{t(!e),rr.set("is_dark",String(!e))};return _.useEffect(()=>{e?(hs.setAttribute("theme-mode","dark"),document.documentElement.classList.add("dark")):(hs.removeAttribute("theme-mode"),document.documentElement.classList.remove("dark"))},[e]),{isDark:e,toggleTheme:r}},zi=_.createContext(null),Bi=({children:e})=>{const{isDark:t,toggleTheme:r}=qi();return c.jsx(zi.Provider,{value:{isDark:t,toggleTheme:r},children:e})};var jt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bt=typeof window>"u"||"Deno"in globalThis;function ae(){}function Ki(e,t){return typeof e=="function"?e(t):e}function Rr(e){return typeof e=="number"&&e>=0&&e!==1/0}function cn(e,t){return Math.max(e+(t||0)-Date.now(),0)}function it(e,t){return typeof e=="function"?e(t):e}function de(e,t){return typeof e=="function"?e(t):e}function fs(e,t){const{type:r="all",exact:s,fetchStatus:n,predicate:i,queryKey:o,stale:a}=e;if(o){if(s){if(t.queryHash!==Wr(o,t.options))return!1}else if(!Ot(t.queryKey,o))return!1}if(r!=="all"){const u=t.isActive();if(r==="active"&&!u||r==="inactive"&&u)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||n&&n!==t.state.fetchStatus||i&&!i(t))}function ms(e,t){const{exact:r,status:s,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ye(t.options.mutationKey)!==Ye(i))return!1}else if(!Ot(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function Wr(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ye)(e)}function Ye(e){return JSON.stringify(e,(t,r)=>Pr(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function Ot(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Ot(e[r],t[r])):!1}function ln(e,t){if(e===t)return e;const r=ps(e)&&ps(t);if(r||Pr(e)&&Pr(t)){const s=r?e:Object.keys(e),n=s.length,i=r?t:Object.keys(t),o=i.length,a=r?[]:{};let u=0;for(let l=0;l<o;l++){const h=r?l:i[l];(!r&&s.includes(h)||r)&&e[h]===void 0&&t[h]===void 0?(a[h]=void 0,u++):(a[h]=ln(e[h],t[h]),a[h]===e[h]&&e[h]!==void 0&&u++)}return n===o&&u===n?e:a}return t}function sr(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function ps(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Pr(e){if(!gs(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!gs(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function gs(e){return Object.prototype.toString.call(e)==="[object Object]"}function Hi(e){return new Promise(t=>{setTimeout(t,e)})}function Er(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?ln(e,t):t}function Qi(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function Vi(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var un=Symbol();function dn(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===un?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Qe,Le,ot,Vs,Wi=(Vs=class extends jt{constructor(){super();R(this,Qe);R(this,Le);R(this,ot);j(this,ot,t=>{if(!bt&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){m(this,Le)||this.setEventListener(m(this,ot))}onUnsubscribe(){var t;this.hasListeners()||((t=m(this,Le))==null||t.call(this),j(this,Le,void 0))}setEventListener(t){var r;j(this,ot,t),(r=m(this,Le))==null||r.call(this),j(this,Le,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){m(this,Qe)!==t&&(j(this,Qe,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof m(this,Qe)=="boolean"?m(this,Qe):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Qe=new WeakMap,Le=new WeakMap,ot=new WeakMap,Vs),Gr=new Wi,at,Oe,ct,Ws,Gi=(Ws=class extends jt{constructor(){super();R(this,at,!0);R(this,Oe);R(this,ct);j(this,ct,t=>{if(!bt&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){m(this,Oe)||this.setEventListener(m(this,ct))}onUnsubscribe(){var t;this.hasListeners()||((t=m(this,Oe))==null||t.call(this),j(this,Oe,void 0))}setEventListener(t){var r;j(this,ct,t),(r=m(this,Oe))==null||r.call(this),j(this,Oe,t(this.setOnline.bind(this)))}setOnline(t){m(this,at)!==t&&(j(this,at,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return m(this,at)}},at=new WeakMap,Oe=new WeakMap,ct=new WeakMap,Ws),nr=new Gi;function Ji(e){return Math.min(1e3*2**e,3e4)}function hn(e){return(e??"online")==="online"?nr.isOnline():!0}var fn=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function yr(e){return e instanceof fn}function mn(e){let t=!1,r=0,s=!1,n,i,o;const a=new Promise((b,x)=>{i=b,o=x}),u=b=>{var x;s||(v(new fn(b)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},h=()=>{t=!1},d=()=>Gr.isFocused()&&(e.networkMode==="always"||nr.isOnline())&&e.canRun(),f=()=>hn(e.networkMode)&&e.canRun(),g=b=>{var x;s||(s=!0,(x=e.onSuccess)==null||x.call(e,b),n==null||n(),i(b))},v=b=>{var x;s||(s=!0,(x=e.onError)==null||x.call(e,b),n==null||n(),o(b))},p=()=>new Promise(b=>{var x;n=w=>{(s||d())&&b(w)},(x=e.onPause)==null||x.call(e)}).then(()=>{var b;n=void 0,s||(b=e.onContinue)==null||b.call(e)}),y=()=>{if(s)return;let b;const x=r===0?e.initialPromise:void 0;try{b=x??e.fn()}catch(w){b=Promise.reject(w)}Promise.resolve(b).then(g).catch(w=>{var S;if(s)return;const C=e.retry??(bt?0:3),F=e.retryDelay??Ji,T=typeof F=="function"?F(r,w):F,k=C===!0||typeof C=="number"&&r<C||typeof C=="function"&&C(r,w);if(t||!k){v(w);return}r++,(S=e.onFail)==null||S.call(e,r,w),Hi(T).then(()=>d()?void 0:p()).then(()=>{t?v(w):y()})})};return{promise:a,cancel:u,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:h,canStart:f,start:()=>(f()?y():p().then(y),a)}}function Zi(){let e=[],t=0,r=f=>{f()},s=f=>{f()},n=f=>setTimeout(f,0);const i=f=>{n=f},o=f=>{let g;t++;try{g=f()}finally{t--,t||l()}return g},a=f=>{t?e.push(f):n(()=>{r(f)})},u=f=>(...g)=>{a(()=>{f(...g)})},l=()=>{const f=e;e=[],f.length&&n(()=>{s(()=>{f.forEach(g=>{r(g)})})})};return{batch:o,batchCalls:u,schedule:a,setNotifyFunction:f=>{r=f},setBatchNotifyFunction:f=>{s=f},setScheduler:i}}var q=Zi(),Ve,Gs,pn=(Gs=class{constructor(){R(this,Ve)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rr(this.gcTime)&&j(this,Ve,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(bt?1/0:5*60*1e3))}clearGcTimeout(){m(this,Ve)&&(clearTimeout(m(this,Ve)),j(this,Ve,void 0))}},Ve=new WeakMap,Gs),lt,ut,oe,V,At,We,ue,_e,Js,Xi=(Js=class extends pn{constructor(t){super();R(this,ue);R(this,lt);R(this,ut);R(this,oe);R(this,V);R(this,At);R(this,We);j(this,We,!1),j(this,At,t.defaultOptions),this.setOptions(t.options),this.observers=[],j(this,oe,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,j(this,lt,Yi(this.options)),this.state=t.state??m(this,lt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=m(this,V))==null?void 0:t.promise}setOptions(t){this.options={...m(this,At),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&m(this,oe).remove(this)}setData(t,r){const s=Er(this.state.data,t,this.options);return E(this,ue,_e).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){E(this,ue,_e).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,n;const r=(s=m(this,V))==null?void 0:s.promise;return(n=m(this,V))==null||n.cancel(t),r?r.then(ae).catch(ae):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(m(this,lt))}isActive(){return this.observers.some(t=>de(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!cn(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=m(this,V))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=m(this,V))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),m(this,oe).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(m(this,V)&&(m(this,We)?m(this,V).cancel({revert:!0}):m(this,V).cancelRetry()),this.scheduleGc()),m(this,oe).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||E(this,ue,_e).call(this,{type:"invalidate"})}fetch(t,r){var u,l,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(m(this,V))return m(this,V).continueRetry(),m(this,V).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const s=new AbortController,n=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(j(this,We,!0),s.signal)})},i=()=>{const d=dn(this.options,r),f={queryKey:this.queryKey,meta:this.meta};return n(f),j(this,We,!1),this.options.persister?this.options.persister(d,f,this):d(f)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};n(o),(u=this.options.behavior)==null||u.onFetch(o,this),j(this,ut,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((l=o.fetchOptions)==null?void 0:l.meta))&&E(this,ue,_e).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const a=d=>{var f,g,v,p;yr(d)&&d.silent||E(this,ue,_e).call(this,{type:"error",error:d}),yr(d)||((g=(f=m(this,oe).config).onError)==null||g.call(f,d,this),(p=(v=m(this,oe).config).onSettled)==null||p.call(v,this.state.data,d,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return j(this,V,mn({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:d=>{var f,g,v,p;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(d),(g=(f=m(this,oe).config).onSuccess)==null||g.call(f,d,this),(p=(v=m(this,oe).config).onSettled)==null||p.call(v,d,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(d,f)=>{E(this,ue,_e).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{E(this,ue,_e).call(this,{type:"pause"})},onContinue:()=>{E(this,ue,_e).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),m(this,V).start()}},lt=new WeakMap,ut=new WeakMap,oe=new WeakMap,V=new WeakMap,At=new WeakMap,We=new WeakMap,ue=new WeakSet,_e=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...gn(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return yr(n)&&n.revert&&m(this,ut)?{...m(this,ut),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),q.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),m(this,oe).notify({query:this,type:"updated",action:t})})},Js);function gn(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hn(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Yi(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ge,Zs,eo=(Zs=class extends jt{constructor(t={}){super();R(this,ge);this.config=t,j(this,ge,new Map)}build(t,r,s){const n=r.queryKey,i=r.queryHash??Wr(n,r);let o=this.get(i);return o||(o=new Xi({cache:this,queryKey:n,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){m(this,ge).has(t.queryHash)||(m(this,ge).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=m(this,ge).get(t.queryHash);r&&(t.destroy(),r===t&&m(this,ge).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){q.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return m(this,ge).get(t)}getAll(){return[...m(this,ge).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>fs(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>fs(t,s)):r}notify(t){q.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){q.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){q.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ge=new WeakMap,Zs),ye,G,Ge,ve,Ie,Xs,to=(Xs=class extends pn{constructor(t){super();R(this,ve);R(this,ye);R(this,G);R(this,Ge);this.mutationId=t.mutationId,j(this,G,t.mutationCache),j(this,ye,[]),this.state=t.state||yn(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){m(this,ye).includes(t)||(m(this,ye).push(t),this.clearGcTimeout(),m(this,G).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){j(this,ye,m(this,ye).filter(r=>r!==t)),this.scheduleGc(),m(this,G).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){m(this,ye).length||(this.state.status==="pending"?this.scheduleGc():m(this,G).remove(this))}continue(){var t;return((t=m(this,Ge))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var n,i,o,a,u,l,h,d,f,g,v,p,y,b,x,w,C,F,T,k;j(this,Ge,mn({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(S,P)=>{E(this,ve,Ie).call(this,{type:"failed",failureCount:S,error:P})},onPause:()=>{E(this,ve,Ie).call(this,{type:"pause"})},onContinue:()=>{E(this,ve,Ie).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>m(this,G).canRun(this)}));const r=this.state.status==="pending",s=!m(this,Ge).canStart();try{if(!r){E(this,ve,Ie).call(this,{type:"pending",variables:t,isPaused:s}),await((i=(n=m(this,G).config).onMutate)==null?void 0:i.call(n,t,this));const P=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,t));P!==this.state.context&&E(this,ve,Ie).call(this,{type:"pending",context:P,variables:t,isPaused:s})}const S=await m(this,Ge).start();return await((l=(u=m(this,G).config).onSuccess)==null?void 0:l.call(u,S,t,this.state.context,this)),await((d=(h=this.options).onSuccess)==null?void 0:d.call(h,S,t,this.state.context)),await((g=(f=m(this,G).config).onSettled)==null?void 0:g.call(f,S,null,this.state.variables,this.state.context,this)),await((p=(v=this.options).onSettled)==null?void 0:p.call(v,S,null,t,this.state.context)),E(this,ve,Ie).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=m(this,G).config).onError)==null?void 0:b.call(y,S,t,this.state.context,this)),await((w=(x=this.options).onError)==null?void 0:w.call(x,S,t,this.state.context)),await((F=(C=m(this,G).config).onSettled)==null?void 0:F.call(C,void 0,S,this.state.variables,this.state.context,this)),await((k=(T=this.options).onSettled)==null?void 0:k.call(T,void 0,S,t,this.state.context)),S}finally{E(this,ve,Ie).call(this,{type:"error",error:S})}}finally{m(this,G).runNext(this)}}},ye=new WeakMap,G=new WeakMap,Ge=new WeakMap,ve=new WeakSet,Ie=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),q.batch(()=>{m(this,ye).forEach(s=>{s.onMutationUpdate(t)}),m(this,G).notify({mutation:this,type:"updated",action:t})})},Xs);function yn(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ne,Dt,Ys,ro=(Ys=class extends jt{constructor(t={}){super();R(this,ne);R(this,Dt);this.config=t,j(this,ne,new Map),j(this,Dt,Date.now())}build(t,r,s){const n=new to({mutationCache:this,mutationId:++Qt(this,Dt)._,options:t.defaultMutationOptions(r),state:s});return this.add(n),n}add(t){const r=Wt(t),s=m(this,ne).get(r)??[];s.push(t),m(this,ne).set(r,s),this.notify({type:"added",mutation:t})}remove(t){var s;const r=Wt(t);if(m(this,ne).has(r)){const n=(s=m(this,ne).get(r))==null?void 0:s.filter(i=>i!==t);n&&(n.length===0?m(this,ne).delete(r):m(this,ne).set(r,n))}this.notify({type:"removed",mutation:t})}canRun(t){var s;const r=(s=m(this,ne).get(Wt(t)))==null?void 0:s.find(n=>n.state.status==="pending");return!r||r===t}runNext(t){var s;const r=(s=m(this,ne).get(Wt(t)))==null?void 0:s.find(n=>n!==t&&n.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){q.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...m(this,ne).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(s=>ms(r,s))}findAll(t={}){return this.getAll().filter(r=>ms(t,r))}notify(t){q.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return q.batch(()=>Promise.all(t.map(r=>r.continue().catch(ae))))}},ne=new WeakMap,Dt=new WeakMap,Ys);function Wt(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function so(e){return{onFetch:(t,r)=>{const s=async()=>{var v,p,y,b,x;const n=t.options,i=(y=(p=(v=t.fetchOptions)==null?void 0:v.meta)==null?void 0:p.fetchMore)==null?void 0:y.direction,o=((b=t.state.data)==null?void 0:b.pages)||[],a=((x=t.state.data)==null?void 0:x.pageParams)||[],u={pages:[],pageParams:[]};let l=!1;const h=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?l=!0:t.signal.addEventListener("abort",()=>{l=!0}),t.signal)})},d=dn(t.options,t.fetchOptions),f=async(w,C,F)=>{if(l)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const T={queryKey:t.queryKey,pageParam:C,direction:F?"backward":"forward",meta:t.options.meta};h(T);const k=await d(T),{maxPages:S}=t.options,P=F?Vi:Qi;return{pages:P(w.pages,k,S),pageParams:P(w.pageParams,C,S)}};let g;if(i&&o.length){const w=i==="backward",C=w?no:ys,F={pages:o,pageParams:a},T=C(n,F);g=await f(F,T,w)}else{g=await f(u,a[0]??n.initialPageParam);const w=e??o.length;for(let C=1;C<w;C++){const F=ys(n,g);if(F==null)break;g=await f(g,F)}}return g};t.options.persister?t.fetchFn=()=>{var n,i;return(i=(n=t.options).persister)==null?void 0:i.call(n,s,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=s}}}function ys(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function no(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var U,Me,Te,dt,ht,ke,ft,mt,en,io=(en=class{constructor(e={}){R(this,U);R(this,Me);R(this,Te);R(this,dt);R(this,ht);R(this,ke);R(this,ft);R(this,mt);j(this,U,e.queryCache||new eo),j(this,Me,e.mutationCache||new ro),j(this,Te,e.defaultOptions||{}),j(this,dt,new Map),j(this,ht,new Map),j(this,ke,0)}mount(){Qt(this,ke)._++,m(this,ke)===1&&(j(this,ft,Gr.subscribe(async e=>{e&&(await this.resumePausedMutations(),m(this,U).onFocus())})),j(this,mt,nr.subscribe(async e=>{e&&(await this.resumePausedMutations(),m(this,U).onOnline())})))}unmount(){var e,t;Qt(this,ke)._--,m(this,ke)===0&&((e=m(this,ft))==null||e.call(this),j(this,ft,void 0),(t=m(this,mt))==null||t.call(this),j(this,mt,void 0))}isFetching(e){return m(this,U).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return m(this,Me).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=m(this,U).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),s=m(this,U).build(this,r);return e.revalidateIfStale&&s.isStaleByTime(it(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return m(this,U).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),n=m(this,U).get(s.queryHash),i=n==null?void 0:n.state.data,o=Ki(t,i);if(o!==void 0)return m(this,U).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return q.batch(()=>m(this,U).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=m(this,U).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=m(this,U);q.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=m(this,U),s={type:"active",...e};return q.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},s=q.batch(()=>m(this,U).findAll(e).map(n=>n.cancel(r)));return Promise.all(s).then(ae).catch(ae)}invalidateQueries(e={},t={}){return q.batch(()=>{if(m(this,U).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=q.batch(()=>m(this,U).findAll(e).filter(n=>!n.isDisabled()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(ae)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ae)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=m(this,U).build(this,t);return r.isStaleByTime(it(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ae).catch(ae)}fetchInfiniteQuery(e){return e.behavior=so(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ae).catch(ae)}resumePausedMutations(){return nr.isOnline()?m(this,Me).resumePausedMutations():Promise.resolve()}getQueryCache(){return m(this,U)}getMutationCache(){return m(this,Me)}getDefaultOptions(){return m(this,Te)}setDefaultOptions(e){j(this,Te,e)}setQueryDefaults(e,t){m(this,dt).set(Ye(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...m(this,dt).values()];let r={};return t.forEach(s=>{Ot(e,s.queryKey)&&(r={...r,...s.defaultOptions})}),r}setMutationDefaults(e,t){m(this,ht).set(Ye(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...m(this,ht).values()];let r={};return t.forEach(s=>{Ot(e,s.mutationKey)&&(r={...r,...s.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...m(this,Te).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Wr(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===un&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...m(this,Te).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){m(this,U).clear(),m(this,Me).clear()}},U=new WeakMap,Me=new WeakMap,Te=new WeakMap,dt=new WeakMap,ht=new WeakMap,ke=new WeakMap,ft=new WeakMap,mt=new WeakMap,en),Y,I,Nt,J,Je,pt,be,Ut,gt,yt,Ze,Xe,Ae,vt,M,Pt,Fr,Ir,Lr,Or,Mr,Tr,kr,vn,tn,oo=(tn=class extends jt{constructor(t,r){super();R(this,M);R(this,Y);R(this,I);R(this,Nt);R(this,J);R(this,Je);R(this,pt);R(this,be);R(this,Ut);R(this,gt);R(this,yt);R(this,Ze);R(this,Xe);R(this,Ae);R(this,vt,new Set);this.options=r,j(this,Y,t),j(this,be,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(m(this,I).addObserver(this),vs(m(this,I),this.options)?E(this,M,Pt).call(this):this.updateResult(),E(this,M,Or).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ar(m(this,I),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ar(m(this,I),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,E(this,M,Mr).call(this),E(this,M,Tr).call(this),m(this,I).removeObserver(this)}setOptions(t,r){const s=this.options,n=m(this,I);if(this.options=m(this,Y).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof de(this.options.enabled,m(this,I))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");E(this,M,kr).call(this),m(this,I).setOptions(this.options),s._defaulted&&!sr(this.options,s)&&m(this,Y).getQueryCache().notify({type:"observerOptionsUpdated",query:m(this,I),observer:this});const i=this.hasListeners();i&&bs(m(this,I),n,this.options,s)&&E(this,M,Pt).call(this),this.updateResult(r),i&&(m(this,I)!==n||de(this.options.enabled,m(this,I))!==de(s.enabled,m(this,I))||it(this.options.staleTime,m(this,I))!==it(s.staleTime,m(this,I)))&&E(this,M,Fr).call(this);const o=E(this,M,Ir).call(this);i&&(m(this,I)!==n||de(this.options.enabled,m(this,I))!==de(s.enabled,m(this,I))||o!==m(this,Ae))&&E(this,M,Lr).call(this,o)}getOptimisticResult(t){const r=m(this,Y).getQueryCache().build(m(this,Y),t),s=this.createResult(r,t);return co(this,s)&&(j(this,J,s),j(this,pt,this.options),j(this,Je,m(this,I).state)),s}getCurrentResult(){return m(this,J)}trackResult(t,r){const s={};return Object.keys(t).forEach(n=>{Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),r==null||r(n),t[n])})}),s}trackProp(t){m(this,vt).add(t)}getCurrentQuery(){return m(this,I)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=m(this,Y).defaultQueryOptions(t),s=m(this,Y).getQueryCache().build(m(this,Y),r);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,r))}fetch(t){return E(this,M,Pt).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),m(this,J)))}createResult(t,r){var k;const s=m(this,I),n=this.options,i=m(this,J),o=m(this,Je),a=m(this,pt),l=t!==s?t.state:m(this,Nt),{state:h}=t;let d={...h},f=!1,g;if(r._optimisticResults){const S=this.hasListeners(),P=!S&&vs(t,r),K=S&&bs(t,s,r,n);(P||K)&&(d={...d,...gn(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:y}=d;if(r.select&&d.data!==void 0)if(i&&d.data===(o==null?void 0:o.data)&&r.select===m(this,Ut))g=m(this,gt);else try{j(this,Ut,r.select),g=r.select(d.data),g=Er(i==null?void 0:i.data,g,r),j(this,gt,g),j(this,be,null)}catch(S){j(this,be,S)}else g=d.data;if(r.placeholderData!==void 0&&g===void 0&&y==="pending"){let S;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))S=i.data;else if(S=typeof r.placeholderData=="function"?r.placeholderData((k=m(this,yt))==null?void 0:k.state.data,m(this,yt)):r.placeholderData,r.select&&S!==void 0)try{S=r.select(S),j(this,be,null)}catch(P){j(this,be,P)}S!==void 0&&(y="success",g=Er(i==null?void 0:i.data,S,r),f=!0)}m(this,be)&&(v=m(this,be),g=m(this,gt),p=Date.now(),y="error");const b=d.fetchStatus==="fetching",x=y==="pending",w=y==="error",C=x&&b,F=g!==void 0;return{status:y,fetchStatus:d.fetchStatus,isPending:x,isSuccess:y==="success",isError:w,isInitialLoading:C,isLoading:C,data:g,dataUpdatedAt:d.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!x,isLoadingError:w&&!F,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&F,isStale:Jr(t,r),refetch:this.refetch}}updateResult(t){const r=m(this,J),s=this.createResult(m(this,I),this.options);if(j(this,Je,m(this,I).state),j(this,pt,this.options),m(this,Je).data!==void 0&&j(this,yt,m(this,I)),sr(s,r))return;j(this,J,s);const n={},i=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!m(this,vt).size)return!0;const u=new Set(a??m(this,vt));return this.options.throwOnError&&u.add("error"),Object.keys(m(this,J)).some(l=>{const h=l;return m(this,J)[h]!==r[h]&&u.has(h)})};(t==null?void 0:t.listeners)!==!1&&i()&&(n.listeners=!0),E(this,M,vn).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&E(this,M,Or).call(this)}},Y=new WeakMap,I=new WeakMap,Nt=new WeakMap,J=new WeakMap,Je=new WeakMap,pt=new WeakMap,be=new WeakMap,Ut=new WeakMap,gt=new WeakMap,yt=new WeakMap,Ze=new WeakMap,Xe=new WeakMap,Ae=new WeakMap,vt=new WeakMap,M=new WeakSet,Pt=function(t){E(this,M,kr).call(this);let r=m(this,I).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ae)),r},Fr=function(){E(this,M,Mr).call(this);const t=it(this.options.staleTime,m(this,I));if(bt||m(this,J).isStale||!Rr(t))return;const s=cn(m(this,J).dataUpdatedAt,t)+1;j(this,Ze,setTimeout(()=>{m(this,J).isStale||this.updateResult()},s))},Ir=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(m(this,I)):this.options.refetchInterval)??!1},Lr=function(t){E(this,M,Tr).call(this),j(this,Ae,t),!(bt||de(this.options.enabled,m(this,I))===!1||!Rr(m(this,Ae))||m(this,Ae)===0)&&j(this,Xe,setInterval(()=>{(this.options.refetchIntervalInBackground||Gr.isFocused())&&E(this,M,Pt).call(this)},m(this,Ae)))},Or=function(){E(this,M,Fr).call(this),E(this,M,Lr).call(this,E(this,M,Ir).call(this))},Mr=function(){m(this,Ze)&&(clearTimeout(m(this,Ze)),j(this,Ze,void 0))},Tr=function(){m(this,Xe)&&(clearInterval(m(this,Xe)),j(this,Xe,void 0))},kr=function(){const t=m(this,Y).getQueryCache().build(m(this,Y),this.options);if(t===m(this,I))return;const r=m(this,I);j(this,I,t),j(this,Nt,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},vn=function(t){q.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(m(this,J))}),m(this,Y).getQueryCache().notify({query:m(this,I),type:"observerResultsUpdated"})})},tn);function ao(e,t){return de(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function vs(e,t){return ao(e,t)||e.state.data!==void 0&&Ar(e,t,t.refetchOnMount)}function Ar(e,t,r){if(de(t.enabled,e)!==!1){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&Jr(e,t)}return!1}function bs(e,t,r,s){return(e!==t||de(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Jr(e,r)}function Jr(e,t){return de(t.enabled,e)!==!1&&e.isStaleByTime(it(t.staleTime,e))}function co(e,t){return!sr(e.getCurrentResult(),t)}var De,Ne,ee,Ce,Pe,Yt,Dr,rn,lo=(rn=class extends jt{constructor(r,s){super();R(this,Pe);R(this,De);R(this,Ne);R(this,ee);R(this,Ce);j(this,De,r),this.setOptions(s),this.bindMethods(),E(this,Pe,Yt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const s=this.options;this.options=m(this,De).defaultMutationOptions(r),sr(this.options,s)||m(this,De).getMutationCache().notify({type:"observerOptionsUpdated",mutation:m(this,ee),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Ye(s.mutationKey)!==Ye(this.options.mutationKey)?this.reset():((n=m(this,ee))==null?void 0:n.state.status)==="pending"&&m(this,ee).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=m(this,ee))==null||r.removeObserver(this)}onMutationUpdate(r){E(this,Pe,Yt).call(this),E(this,Pe,Dr).call(this,r)}getCurrentResult(){return m(this,Ne)}reset(){var r;(r=m(this,ee))==null||r.removeObserver(this),j(this,ee,void 0),E(this,Pe,Yt).call(this),E(this,Pe,Dr).call(this)}mutate(r,s){var n;return j(this,Ce,s),(n=m(this,ee))==null||n.removeObserver(this),j(this,ee,m(this,De).getMutationCache().build(m(this,De),this.options)),m(this,ee).addObserver(this),m(this,ee).execute(r)}},De=new WeakMap,Ne=new WeakMap,ee=new WeakMap,Ce=new WeakMap,Pe=new WeakSet,Yt=function(){var s;const r=((s=m(this,ee))==null?void 0:s.state)??yn();j(this,Ne,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Dr=function(r){q.batch(()=>{var s,n,i,o,a,u,l,h;if(m(this,Ce)&&this.hasListeners()){const d=m(this,Ne).variables,f=m(this,Ne).context;(r==null?void 0:r.type)==="success"?((n=(s=m(this,Ce)).onSuccess)==null||n.call(s,r.data,d,f),(o=(i=m(this,Ce)).onSettled)==null||o.call(i,r.data,null,d,f)):(r==null?void 0:r.type)==="error"&&((u=(a=m(this,Ce)).onError)==null||u.call(a,r.error,d,f),(h=(l=m(this,Ce)).onSettled)==null||h.call(l,void 0,r.error,d,f))}this.listeners.forEach(d=>{d(m(this,Ne))})})},rn),bn=_.createContext(void 0),xn=e=>{const t=_.useContext(bn);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},uo=({client:e,children:t})=>(_.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(bn.Provider,{value:e,children:t})),Sn=_.createContext(!1),ho=()=>_.useContext(Sn);Sn.Provider;function fo(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var mo=_.createContext(fo()),po=()=>_.useContext(mo);function wn(e,t){return typeof e=="function"?e(...t):!!e}function go(){}var yo=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},vo=e=>{_.useEffect(()=>{e.clearReset()},[e])},bo=({result:e,errorResetBoundary:t,throwOnError:r,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&wn(r,[e.error,s]),xo=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},So=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,wo=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function _o(e,t,r){var l,h,d,f;const s=xn(),n=ho(),i=po(),o=s.defaultQueryOptions(e);(h=(l=s.getDefaultOptions().queries)==null?void 0:l._experimental_beforeQuery)==null||h.call(l,o),o._optimisticResults=n?"isRestoring":"optimistic",xo(o),yo(o,i),vo(i);const[a]=_.useState(()=>new t(s,o)),u=a.getOptimisticResult(o);if(_.useSyncExternalStore(_.useCallback(g=>{const v=n?()=>{}:a.subscribe(q.batchCalls(g));return a.updateResult(),v},[a,n]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),_.useEffect(()=>{a.setOptions(o,{listeners:!1})},[o,a]),So(o,u))throw wo(o,a,i);if(bo({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw u.error;return(f=(d=s.getDefaultOptions().queries)==null?void 0:d._experimental_afterQuery)==null||f.call(d,o,u),o.notifyOnChangeProps?u:a.trackResult(u)}function et(e,t){return _o(e,oo)}function z(e,t){const r=xn(),[s]=_.useState(()=>new lo(r,e));_.useEffect(()=>{s.setOptions(e)},[s,e]);const n=_.useSyncExternalStore(_.useCallback(o=>s.subscribe(q.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=_.useCallback((o,a)=>{s.mutate(o,a).catch(go)},[s]);if(n.error&&wn(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}const xs="pushstate",Ss="popstate",_n="beforeunload",jn=e=>(e.preventDefault(),e.returnValue=""),jo=()=>{removeEventListener(_n,jn,{capture:!0})};function Cn(e){let t=e.getLocation();const r=new Set;let s=[];const n=()=>{t=e.getLocation(),r.forEach(o=>o())},i=async(o,a)=>{var u;if(!((a==null?void 0:a.ignoreBlocker)??!1)&&typeof document<"u"&&s.length){for(const h of s)if(!await h()){(u=e.onBlocked)==null||u.call(e,n);return}}o()};return{get location(){return t},subscribers:r,subscribe:o=>(r.add(o),()=>{r.delete(o)}),push:(o,a,u)=>{a=Et(a),i(()=>{e.pushState(o,a),n()},u)},replace:(o,a,u)=>{a=Et(a),i(()=>{e.replaceState(o,a),n()},u)},go:(o,a)=>{i(()=>{e.go(o),n()},a)},back:o=>{i(()=>{e.back(),n()},o)},forward:o=>{i(()=>{e.forward(),n()},o)},createHref:o=>e.createHref(o),block:o=>(s.push(o),s.length===1&&addEventListener(_n,jn,{capture:!0}),()=>{s=s.filter(a=>a!==o),s.length||jo()}),flush:()=>{var o;return(o=e.flush)==null?void 0:o.call(e)},destroy:()=>{var o;return(o=e.destroy)==null?void 0:o.call(e)},notify:n}}function Et(e){return e||(e={}),{...e,key:Pn()}}function Rn(e){const t=(e==null?void 0:e.window)??(typeof document<"u"?window:void 0),r=t.history.pushState,s=t.history.replaceState,n=(e==null?void 0:e.createHref)??(p=>p),i=(e==null?void 0:e.parseLocation)??(()=>Mt(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));let o=i(),a;const u=()=>o;let l,h;const d=()=>{l&&(v._ignoreSubscribers=!0,(l.isPush?t.history.pushState:t.history.replaceState)(l.state,"",l.href),v._ignoreSubscribers=!1,l=void 0,h=void 0,a=void 0)},f=(p,y,b)=>{const x=n(y);h||(a=o),o=Mt(y,b),l={href:x,state:b,isPush:(l==null?void 0:l.isPush)||p==="push"},h||(h=Promise.resolve().then(()=>d()))},g=()=>{o=i(),v.notify()},v=Cn({getLocation:u,pushState:(p,y)=>f("push",p,y),replaceState:(p,y)=>f("replace",p,y),back:()=>t.history.back(),forward:()=>t.history.forward(),go:p=>t.history.go(p),createHref:p=>n(p),flush:d,destroy:()=>{t.history.pushState=r,t.history.replaceState=s,t.removeEventListener(xs,g),t.removeEventListener(Ss,g)},onBlocked:p=>{a&&o!==a&&(o=a,p())}});return t.addEventListener(xs,g),t.addEventListener(Ss,g),t.history.pushState=function(...p){const y=r.apply(t.history,p);return v._ignoreSubscribers||g(),y},t.history.replaceState=function(...p){const y=s.apply(t.history,p);return v._ignoreSubscribers||g(),y},v}function Co(e){const t=typeof document<"u"?window:void 0;return Rn({window:t,parseLocation:()=>{const r=t.location.hash.split("#").slice(1).join("#")??"/";return Mt(r,t.history.state)},createHref:r=>`${t.location.pathname}${t.location.search}#${r}`})}function Ro(e={initialEntries:["/"]}){const t=e.initialEntries;let r=e.initialIndex??t.length-1,s={key:Pn()};return Cn({getLocation:()=>Mt(t[r],s),pushState:(i,o)=>{s=o,t.splice,r<t.length-1&&t.splice(r+1),t.push(i),r=Math.max(t.length-1,0)},replaceState:(i,o)=>{s=o,t[r]=i},back:()=>{s=Et(s),r=Math.max(r-1,0)},forward:()=>{s=Et(s),r=Math.min(r+1,t.length-1)},go:i=>{s=Et(s),r=Math.min(Math.max(r+i,0),t.length-1)},createHref:i=>i})}function Mt(e,t){const r=e.indexOf("#"),s=e.indexOf("?");return{href:e,pathname:e.substring(0,r>0?s>0?Math.min(r,s):r:s>0?s:e.length),hash:r>-1?e.substring(r):"",search:s>-1?e.slice(s,r===-1?void 0:r):"",state:t||{}}}function Pn(){return(Math.random()+1).toString(36).substring(7)}var Po="Invariant failed";function te(e,t){if(!e)throw new Error(Po)}var Eo=!0;function Tt(e,t){if(!Eo){if(e)return;var r="Warning: "+t;try{throw Error(r)}catch{}}}const vr=_.createContext(null);function En(){return typeof document>"u"?vr:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=vr,vr)}function Ee(e){const t=_.useContext(En());return Tt(!(((e==null?void 0:e.warn)??!0)&&!t),"useRouter must be used inside a <RouterProvider> component!"),t}var Fn={exports:{}},In={},Ln={exports:{}},On={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt=_;function Fo(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Io=typeof Object.is=="function"?Object.is:Fo,Lo=xt.useState,Oo=xt.useEffect,Mo=xt.useLayoutEffect,To=xt.useDebugValue;function ko(e,t){var r=t(),s=Lo({inst:{value:r,getSnapshot:t}}),n=s[0].inst,i=s[1];return Mo(function(){n.value=r,n.getSnapshot=t,br(n)&&i({inst:n})},[e,r,t]),Oo(function(){return br(n)&&i({inst:n}),e(function(){br(n)&&i({inst:n})})},[e]),To(r),r}function br(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Io(e,r)}catch{return!0}}function Ao(e,t){return t()}var Do=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ao:ko;On.useSyncExternalStore=xt.useSyncExternalStore!==void 0?xt.useSyncExternalStore:Do;Ln.exports=On;var No=Ln.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lr=_,Uo=No;function $o(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qo=typeof Object.is=="function"?Object.is:$o,zo=Uo.useSyncExternalStore,Bo=lr.useRef,Ko=lr.useEffect,Ho=lr.useMemo,Qo=lr.useDebugValue;In.useSyncExternalStoreWithSelector=function(e,t,r,s,n){var i=Bo(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Ho(function(){function u(g){if(!l){if(l=!0,h=g,g=s(g),n!==void 0&&o.hasValue){var v=o.value;if(n(v,g))return d=v}return d=g}if(v=d,qo(h,g))return v;var p=s(g);return n!==void 0&&n(v,p)?v:(h=g,d=p)}var l=!1,h,d,f=r===void 0?null:r;return[function(){return u(t())},f===null?void 0:function(){return u(f())}]},[t,r,s,n]);var a=zo(e,i[0],i[1]);return Ko(function(){o.hasValue=!0,o.value=a},[a]),Qo(a),a};Fn.exports=In;var Mn=Fn.exports;const Vo=Vr(Mn);class Wo{constructor(t,r){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=s=>{var n,i;this.listeners.add(s);const o=(i=(n=this.options)==null?void 0:n.onSubscribe)==null?void 0:i.call(n,s,this);return()=>{this.listeners.delete(s),o==null||o()}},this.setState=s=>{var n,i,o;const a=this.state;this.state=(n=this.options)!=null&&n.updateFn?this.options.updateFn(a)(s):s(a),(o=(i=this.options)==null?void 0:i.onUpdate)==null||o.call(i),this._flush()},this._flush=()=>{if(this._batching)return;const s=++this._flushing;this.listeners.forEach(n=>{this._flushing===s&&n()})},this.batch=s=>{if(this._batching)return s();this._batching=!0,s(),this._batching=!1,this._flush()},this.state=t,this.options=r}}function Go(e,t=r=>r){return Mn.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,Jo)}function Jo(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!Object.is(e[r[s]],t[r[s]]))return!1;return!0}const ie="__root__";function Zo(e,t){let r,s,n,i="";for(r in e)if((n=e[r])!==void 0)if(Array.isArray(n))for(s=0;s<n.length;s++)i&&(i+="&"),i+=encodeURIComponent(r)+"="+encodeURIComponent(n[s]);else i&&(i+="&"),i+=encodeURIComponent(r)+"="+encodeURIComponent(n);return""+i}function ws(e){if(!e)return"";const t=decodeURIComponent(e);return t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t}function Xo(e,t){let r,s;const n={},i=e.split("&");for(;r=i.shift();){const o=r.indexOf("=");if(o!==-1){s=r.slice(0,o);const a=r.slice(o+1);n[s]!==void 0?n[s]=[].concat(n[s],ws(a)):n[s]=ws(a)}else s=r,n[s]=""}return n}const Yo=ta(JSON.parse),ea=ra(JSON.stringify,JSON.parse);function ta(e){return t=>{t.substring(0,1)==="?"&&(t=t.substring(1));const r=Xo(t);for(const s in r){const n=r[s];if(typeof n=="string")try{r[s]=e(n)}catch{}}return r}}function ra(e,t){function r(s){if(typeof s=="object"&&s!==null)try{return e(s)}catch{}else if(typeof s=="string"&&typeof t=="function")try{return t(s),e(s)}catch{}return s}return s=>{s={...s},Object.keys(s).forEach(i=>{const o=s[i];typeof o>"u"||o===void 0?delete s[i]:s[i]=r(o)});const n=Zo(s).toString();return n?`?${n}`:""}}function ir(e){return e[e.length-1]}function sa(e){return typeof e=="function"}function Gt(e,t){return sa(e)?e(t):e}function Ft(e,t){return t.reduce((r,s)=>(r[s]=e[s],r),{})}function st(e,t){if(e===t)return e;const r=t,s=js(e)&&js(r);if(s||St(e)&&St(r)){const n=s?e:Object.keys(e),i=n.length,o=s?r:Object.keys(r),a=o.length,u=s?[]:{};let l=0;for(let h=0;h<a;h++){const d=s?h:o[h];(!s&&n.includes(d)||s)&&e[d]===void 0&&r[d]===void 0?(u[d]=void 0,l++):(u[d]=st(e[d],r[d]),u[d]===e[d]&&e[d]!==void 0&&l++)}return i===a&&l===i?e:u}return r}function St(e){if(!_s(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const r=t.prototype;return!(!_s(r)||!r.hasOwnProperty("isPrototypeOf"))}function _s(e){return Object.prototype.toString.call(e)==="[object Object]"}function js(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function It(e,t,r=!1){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(St(e)&&St(t)){const s=Object.keys(e).filter(i=>e[i]!==void 0),n=Object.keys(t).filter(i=>t[i]!==void 0);return!r&&s.length!==n.length?!1:!n.some(i=>!(i in e)||!It(e[i],t[i],r))}return Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:!e.some((s,n)=>!It(s,t[n],r)):!1}const xr=typeof window<"u"?_.useLayoutEffect:_.useEffect;function nt(e){let t,r;const s=new Promise((n,i)=>{t=n,r=i});return s.status="pending",s.resolve=n=>{s.status="resolved",s.value=n,t(n),e==null||e(n)},s.reject=n=>{s.status="rejected",r(n)},s}function Cs(e){const t=_.useRef({value:e,prev:null}),r=t.current.value;return e!==r&&(t.current={value:e,prev:r}),t.current.prev}function Ue(e){return ur(e.filter(t=>t!==void 0).join("/"))}function ur(e){return e.replace(/\/{2,}/g,"/")}function Zr(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function He(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function na(e){return He(Zr(e))}function ia({basepath:e,base:t,to:r,trailingSlash:s="never"}){var n,i;t=or(e,t),r=or(e,r);let o=wt(t);const a=wt(r);o.length>1&&((n=ir(o))==null?void 0:n.value)==="/"&&o.pop(),a.forEach((l,h)=>{l.value==="/"?h?h===a.length-1&&o.push(l):o=[l]:l.value===".."?o.pop():l.value==="."||o.push(l)}),o.length>1&&(((i=ir(o))==null?void 0:i.value)==="/"?s==="never"&&o.pop():s==="always"&&o.push({type:"pathname",value:"/"}));const u=Ue([e,...o.map(l=>l.value)]);return ur(u)}function wt(e){if(!e)return[];e=ur(e);const t=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),!e)return t;const r=e.split("/").filter(Boolean);return t.push(...r.map(s=>s==="$"||s==="*"?{type:"wildcard",value:s}:s.charAt(0)==="$"?{type:"param",value:s}:{type:"pathname",value:decodeURIComponent(s)})),e.slice(-1)==="/"&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),t}function Sr({path:e,params:t,leaveWildcards:r,leaveParams:s}){const n=wt(e),i={};for(const[o,a]of Object.entries(t)){const u=typeof a=="string";["*","_splat"].includes(o)?i[o]=u?encodeURI(a):a:i[o]=u?encodeURIComponent(a):a}return Ue(n.map(o=>{if(o.type==="wildcard"){const a=i._splat;return r?`${o.value}${a??""}`:a}if(o.type==="param"){if(s){const a=i[o.value];return`${o.value}${a??""}`}return i[o.value.substring(1)]??"undefined"}return o.value}))}function Jt(e,t,r){const s=oa(e,t,r);if(!(r.to&&!s))return s??{}}function or(e,t){switch(!0){case e==="/":return t;case t===e:return"";case t.length<e.length:return t;case t[e.length]!=="/":return t;case t.startsWith(e):return t.slice(e.length);default:return t}}function oa(e,t,r){t=or(e,t);const s=or(e,`${r.to??"$"}`),n=wt(t),i=wt(s);t.startsWith("/")||n.unshift({type:"pathname",value:"/"}),s.startsWith("/")||i.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let u=0;u<Math.max(n.length,i.length);u++){const l=n[u],h=i[u],d=u>=n.length-1,f=u>=i.length-1;if(h){if(h.type==="wildcard"){const g=decodeURI(Ue(n.slice(u).map(v=>v.value)));return o["*"]=g,o._splat=g,!0}if(h.type==="pathname"){if(h.value==="/"&&!(l!=null&&l.value))return!0;if(l){if(r.caseSensitive){if(h.value!==l.value)return!1}else if(h.value.toLowerCase()!==l.value.toLowerCase())return!1}}if(!l)return!1;if(h.type==="param"){if(l.value==="/")return!1;l.value.charAt(0)!=="$"&&(o[h.value.substring(1)]=decodeURIComponent(l.value))}}if(!d&&f)return o["**"]=Ue(n.slice(u+1).map(g=>g.value)),!!r.fuzzy&&(h==null?void 0:h.value)!=="/"}return!0})()?o:void 0}function aa(e){if(e.isRedirect=!0,e.statusCode=e.statusCode||e.code||301,e.headers=e.headers||{},e.throw)throw e;return e}function Ke(e){return!!(e!=null&&e.isRedirect)}function Rs(e){return!!(e!=null&&e.isRedirect)&&e.href}function Xr(e){const t=e.errorComponent??dr;return c.jsx(ca,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:r,reset:s})=>r?_.createElement(t,{error:r,reset:s}):e.children})}class ca extends _.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,r){r.error&&r.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,r){this.props.onCatch&&this.props.onCatch(t,r)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function dr({error:e}){const[t,r]=_.useState(!1);return c.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[c.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),c.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>r(s=>!s),children:t?"Hide Error":"Show Error"})]}),c.jsx("div",{style:{height:".25rem"}}),t?c.jsx("div",{children:c.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?c.jsx("code",{children:e.message}):null})}):null]})}function ce(e){const t=Ee({warn:(e==null?void 0:e.router)===void 0});return Go(((e==null?void 0:e.router)||t).__store,e==null?void 0:e.select)}function pe(e){return!!(e!=null&&e.isNotFound)}function la(e){const t=ce({select:r=>`not-found-${r.location.pathname}-${r.status}`});return c.jsx(Xr,{getResetKey:()=>t,onCatch:(r,s)=>{var n;if(pe(r))(n=e.onCatch)==null||n.call(e,r,s);else throw r},errorComponent:({error:r})=>{var s;return(s=e.fallback)==null?void 0:s.call(e,r)},children:e.children})}function ua(){return c.jsx("p",{children:"Not Found"})}const da={stringify:e=>JSON.stringify(e,function(r,s){const n=this[r],i=Ps.find(o=>o.stringifyCondition(n));return i?i.stringify(n):s}),parse:e=>JSON.parse(e,function(r,s){const n=this[r],i=Ps.find(o=>o.parseCondition(n));return i?i.parse(n):s})},Ps=[{stringifyCondition:e=>e instanceof Date,stringify:e=>({$date:e.toISOString()}),parseCondition:e=>St(e)&&e.$date,parse:e=>new Date(e.$date)},{stringifyCondition:e=>e===void 0,stringify:()=>({$undefined:""}),parseCondition:e=>St(e)&&e.$undefined==="",parse:()=>{}}],ha=["component","errorComponent","pendingComponent","notFoundComponent"];function fa(e){return new ma(e)}class ma{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.subscribers=new Set,this.startReactTransition=r=>r(),this.update=r=>{r.notFoundRoute;const s=this.options;this.options={...this.options,...r},this.isServer=this.options.isServer??typeof document>"u",(!this.basepath||r.basepath&&r.basepath!==s.basepath)&&(r.basepath===void 0||r.basepath===""||r.basepath==="/"?this.basepath="/":this.basepath=`/${na(r.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?Ro({initialEntries:[this.basepath||"/"]}):Rn()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new Wo(ya(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(n=>!["redirected"].includes(n.status))}}}))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const r=this.options.notFoundRoute;r&&(r.init({originalIndex:99999999999}),this.routesById[r.id]=r);const s=o=>{o.forEach((a,u)=>{a.init({originalIndex:u});const l=this.routesById[a.id];if(te(!l,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const d=He(a.fullPath);(!this.routesByPath[d]||a.fullPath.endsWith("/"))&&(this.routesByPath[d]=a)}const h=a.children;h!=null&&h.length&&s(h)})};s([this.routeTree]);const n=[];Object.values(this.routesById).forEach((o,a)=>{var u;if(o.isRoot||!o.path)return;const l=Zr(o.fullPath),h=wt(l);for(;h.length>1&&((u=h[0])==null?void 0:u.value)==="/";)h.shift();const d=h.map(f=>f.value==="/"?.75:f.type==="param"?.5:f.type==="wildcard"?.25:1);n.push({child:o,trimmed:l,parsed:h,index:a,scores:d})}),this.flatRoutes=n.sort((o,a)=>{const u=Math.min(o.scores.length,a.scores.length);for(let l=0;l<u;l++)if(o.scores[l]!==a.scores[l])return a.scores[l]-o.scores[l];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let l=0;l<u;l++)if(o.parsed[l].value!==a.parsed[l].value)return o.parsed[l].value>a.parsed[l].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(r,s)=>{const n={eventType:r,fn:s};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=r=>{this.subscribers.forEach(s=>{s.eventType===r.type&&s.fn(r)})},this.parseLocation=r=>{const s=({pathname:a,search:u,hash:l,state:h})=>{const d=this.options.parseSearch(u),f=this.options.stringifySearch(d);return{pathname:a,searchStr:f,search:st(r==null?void 0:r.search,d),hash:l.split("#").reverse()[0]??"",href:`${a}${f}${l}`,state:st(r==null?void 0:r.state,h)}},n=s(this.history.location),{__tempLocation:i,__tempKey:o}=n.state;if(i&&(!o||o===this.tempLocationKey)){const a=s(i);return a.state.key=n.state.key,delete a.state.__tempLocation,{...a,maskedLocation:n}}return n},this.resolvePathWithBase=(r,s)=>ia({basepath:this.basepath,base:r,to:ur(s),trailingSlash:this.options.trailingSlash}),this.cancelMatch=r=>{const s=this.getMatch(r);s&&(s.abortController.abort(),clearTimeout(s.pendingTimeout))},this.cancelMatches=()=>{var r;(r=this.state.pendingMatches)==null||r.forEach(s=>{this.cancelMatch(s.id)})},this.buildLocation=r=>{const s=(i={},o)=>{var a,u,l;const h=i._fromLocation!=null?this.matchRoutes({...i._fromLocation,search:i.fromSearch||i._fromLocation.search}):this.state.matches,d=i.from!=null?h.find(N=>Jt(this.basepath,He(N.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,f=(d==null?void 0:d.pathname)||this.latestLocation.pathname;te(i.from==null||d!=null,"Could not find match for from: "+i.from);const g=((a=ir(h))==null?void 0:a.search)||this.latestLocation.search,v=o==null?void 0:o.filter(N=>h.find(Q=>Q.routeId===N.routeId)),p=this.routesById[(u=v==null?void 0:v.find(N=>N.pathname===f))==null?void 0:u.routeId];let y=i.to?this.resolvePathWithBase(f,`${i.to}`):this.resolvePathWithBase(f,(p==null?void 0:p.to)??f);const b={...(l=ir(h))==null?void 0:l.params};let x=(i.params??!0)===!0?b:{...b,...Gt(i.params,b)};Object.keys(x).length>0&&(o==null||o.map(N=>{var Q;const re=this.looseRoutesById[N.routeId];return((Q=re==null?void 0:re.options.params)==null?void 0:Q.stringify)??re.options.stringifyParams}).filter(Boolean).forEach(N=>{x={...x,...N(x)}})),y=Sr({path:y,params:x??{},leaveWildcards:!1,leaveParams:r.leaveParams});const w=(v==null?void 0:v.map(N=>this.looseRoutesById[N.routeId].options.preSearchFilters??[]).flat().filter(Boolean))??[],C=(v==null?void 0:v.map(N=>this.looseRoutesById[N.routeId].options.postSearchFilters??[]).flat().filter(Boolean))??[],F=w.length?w.reduce((N,Q)=>Q(N),g):g,T=i.search===!0?F:i.search?Gt(i.search,F):w.length?F:{},k=C.length?C.reduce((N,Q)=>Q(N),T):T,S=st(g,k),P=this.options.stringifySearch(S),K=i.hash===!0?this.latestLocation.hash:i.hash?Gt(i.hash,this.latestLocation.hash):void 0,Z=K?`#${K}`:"";let H=i.state===!0?this.latestLocation.state:i.state?Gt(i.state,this.latestLocation.state):{};return H=st(this.latestLocation.state,H),{pathname:y,search:S,searchStr:P,state:H,hash:K??"",href:`${y}${P}${Z}`,unmaskOnReload:i.unmaskOnReload}},n=(i={},o)=>{var a;const u=s(i);let l=o?s(o):void 0;if(!l){let v={};const p=(a=this.options.routeMasks)==null?void 0:a.find(y=>{const b=Jt(this.basepath,u.pathname,{to:y.from,caseSensitive:!1,fuzzy:!1});return b?(v=b,!0):!1});if(p){const{from:y,...b}=p;o={...Ft(r,["from"]),...b,params:v},l=s(o)}}const h=this.matchRoutes(u),d=l?this.matchRoutes(l):void 0,f=l?s(o,d):void 0,g=s(i,h);return f&&(g.maskedLocation=f),g};return r.mask?n(r,{...Ft(r,["from"]),...r.mask}):n(r)},this.commitLocation=({viewTransition:r,ignoreBlocker:s,...n})=>{const i=()=>{n.state.key=this.latestLocation.state.key;const u=It(n.state,this.latestLocation.state);return delete n.state.key,u},o=this.latestLocation.href===n.href,a=this.commitLocationPromise;if(this.commitLocationPromise=nt(()=>{a==null||a.resolve()}),o&&i())this.load();else{let{maskedLocation:u,...l}=n;u&&(l={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...l,search:l.searchStr,state:{...l.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(l.unmaskOnReload??this.options.unmaskOnReload??!1)&&(l.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=r,this.history[n.replace?"replace":"push"](l.href,l.state,{ignoreBlocker:s})}return this.resetNextScroll=n.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:r,resetScroll:s,viewTransition:n,ignoreBlocker:i,...o}={})=>{const a=o.href;if(a){const l=Mt(a,{});o.to=l.pathname,o.search=this.options.parseSearch(l.search),o.hash=l.hash}const u=this.buildLocation(o);return this.commitLocation({...u,viewTransition:n,replace:r,resetScroll:s,ignoreBlocker:i})},this.navigate=({to:r,__isRedirect:s,...n})=>{const i=String(r);let o;try{new URL(`${i}`),o=!0}catch{}return te(!o),this.buildAndCommitLocation({...n,to:r})},this.load=async()=>{this.latestLocation=this.parseLocation(this.latestLocation),this.__store.setState(i=>({...i,loadedAt:Date.now()}));let r,s,n;for(n=new Promise(i=>{this.startReactTransition(async()=>{var o;try{const a=this.latestLocation,u=this.state.resolvedLocation,l=u.href!==a.href;this.cancelMatches();let h;this.__store.batch(()=>{h=this.matchRoutes(a),this.__store.setState(d=>({...d,status:"pending",isLoading:!0,location:a,pendingMatches:h,cachedMatches:d.cachedMatches.filter(f=>!h.find(g=>g.id===f.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:u,toLocation:a,pathChanged:l}),this.emit({type:"onBeforeLoad",fromLocation:u,toLocation:a,pathChanged:l}),await this.loadMatches({matches:h,location:a,onReady:async()=>{this.startViewTransition(async()=>{let d,f,g;this.__store.batch(()=>{this.__store.setState(v=>{const p=v.matches,y=v.pendingMatches||v.matches;return d=p.filter(b=>!y.find(x=>x.id===b.id)),f=y.filter(b=>!p.find(x=>x.id===b.id)),g=p.filter(b=>y.find(x=>x.id===b.id)),{...v,isLoading:!1,matches:y,pendingMatches:void 0,cachedMatches:[...v.cachedMatches,...d.filter(b=>b.status!=="error")]}}),this.cleanCache()}),[[d,"onLeave"],[f,"onEnter"],[g,"onStay"]].forEach(([v,p])=>{v.forEach(y=>{var b,x;(x=(b=this.looseRoutesById[y.routeId].options)[p])==null||x.call(b,y)})})})}})}catch(a){Rs(a)?(r=a,this.isServer||this.navigate({...a,replace:!0,__isRedirect:!0})):pe(a)&&(s=a),this.__store.setState(u=>({...u,statusCode:r?r.statusCode:s?404:u.matches.some(l=>l.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===n&&((o=this.commitLocationPromise)==null||o.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),i()})}),this.latestLoadPromise=n,await n;this.latestLoadPromise&&n!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=r=>{var s,n;const i=this.shouldViewTransition??this.options.defaultViewTransition;delete this.shouldViewTransition,(n=(s=i&&typeof document<"u"?document:void 0)==null?void 0:s.startViewTransition)!=null&&n.call(s,r)||r()},this.updateMatch=(r,s)=>{var n;let i;const o=(n=this.state.pendingMatches)==null?void 0:n.find(l=>l.id===r),a=this.state.matches.find(l=>l.id===r),u=o?"pendingMatches":a?"matches":"cachedMatches";return this.__store.setState(l=>{var h;return{...l,[u]:(h=l[u])==null?void 0:h.map(d=>d.id===r?i=s(d):d)}}),i},this.getMatch=r=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(s=>s.id===r),this.loadMatches=async({location:r,matches:s,preload:n,onReady:i,updateMatch:o=this.updateMatch})=>{let a,u=!1;const l=async()=>{u||(u=!0,await(i==null?void 0:i()))};!this.isServer&&!this.state.matches.length&&l();const h=(d,f)=>{var g,v,p;if(Rs(f))throw f;if(Ke(f)||pe(f)){if(o(d.id,y=>({...y,status:Ke(f)?"redirected":pe(f)?"notFound":"error",isFetching:!1,error:f,beforeLoadPromise:void 0,loaderPromise:void 0})),f.routeId||(f.routeId=d.routeId),(g=d.beforeLoadPromise)==null||g.resolve(),(v=d.loaderPromise)==null||v.resolve(),(p=d.loadPromise)==null||p.resolve(),Ke(f))throw u=!0,f=this.resolveRedirect({...f,_fromLocation:r}),f;if(pe(f))throw this._handleNotFound(s,f,{updateMatch:o}),f}};try{await new Promise((d,f)=>{(async()=>{var g,v,p;try{const y=(w,C,F)=>{var T,k;const{id:S,routeId:P}=s[w],K=this.looseRoutesById[P];if(C instanceof Promise)throw C;C.routerCode=F,a=a??w,h(this.getMatch(S),C);try{(k=(T=K.options).onError)==null||k.call(T,C)}catch(Z){C=Z,h(this.getMatch(S),C)}o(S,Z=>{var H;return(H=Z.beforeLoadPromise)==null||H.resolve(),{...Z,error:C,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[w,{id:C,routeId:F}]of s.entries()){const T=this.getMatch(C),k=(g=s[w-1])==null?void 0:g.id;if(T.beforeLoadPromise||T.loaderPromise)await T.beforeLoadPromise;else{try{o(C,A=>({...A,loadPromise:nt(()=>{var se;(se=A.loadPromise)==null||se.resolve()}),beforeLoadPromise:nt()}));const S=this.looseRoutesById[F],P=new AbortController,K=S.options.pendingMs??this.options.defaultPendingMs,Z=!!(i&&!this.isServer&&!n&&(S.options.loader||S.options.beforeLoad)&&typeof K=="number"&&K!==1/0&&(S.options.pendingComponent??this.options.defaultPendingComponent));let H;Z&&(H=setTimeout(()=>{try{l()}catch{}},K));const{paramsError:N,searchError:Q}=this.getMatch(C);N&&y(w,N,"PARSE_PARAMS"),Q&&y(w,Q,"VALIDATE_SEARCH");const re=()=>k?this.getMatch(k).context:this.options.context??{};o(C,A=>({...A,isFetching:"beforeLoad",fetchCount:A.fetchCount+1,abortController:P,pendingTimeout:H,context:{...re(),...A.__routeContext,...A.__beforeLoadContext}}));const{search:tt,params:qe,context:L,cause:me}=this.getMatch(C),le={search:tt,abortController:P,params:qe,preload:!!n,context:L,location:r,navigate:A=>this.navigate({...A,_fromLocation:r}),buildLocation:this.buildLocation,cause:n?"preload":me};let X=await((p=(v=S.options).beforeLoad)==null?void 0:p.call(v,le))??{};this.serializeLoaderData&&(X=this.serializeLoaderData("__beforeLoadContext",X,{router:this,match:this.getMatch(C)})),(Ke(X)||pe(X))&&y(w,X,"BEFORE_LOAD"),o(C,A=>({...A,__beforeLoadContext:X,context:{...re(),...A.__routeContext,...X},abortController:P}))}catch(S){y(w,S,"BEFORE_LOAD")}o(C,S=>{var P;return(P=S.beforeLoadPromise)==null||P.resolve(),{...S,beforeLoadPromise:void 0,isFetching:!1}})}}const b=s.slice(0,a),x=[];b.forEach(({id:w,routeId:C},F)=>{x.push((async()=>{const{loaderPromise:T}=this.getMatch(w);if(T)await T;else{const k=x[F-1],S=this.looseRoutesById[C],P=()=>{const{params:me,loaderDeps:le,abortController:X,context:A,cause:se}=this.getMatch(w);return{params:me,deps:le,preload:!!n,parentMatchPromise:k,abortController:X,context:A,location:r,navigate:Se=>this.navigate({...Se,_fromLocation:r}),cause:n?"preload":se,route:S}},K=Date.now()-this.getMatch(w).updatedAt,Z=n?S.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:S.options.staleTime??this.options.defaultStaleTime??0,H=S.options.shouldReload,N=typeof H=="function"?H(P()):H;o(w,me=>({...me,loaderPromise:nt(),preload:!!n&&!this.state.matches.find(le=>le.id===w)}));const Q=async()=>{var me,le,X,A,se,Se,os,as;try{const Ht=async()=>{const Fe=this.getMatch(w);Fe.minPendingPromise&&await Fe.minPendingPromise};try{S._lazyPromise=S._lazyPromise||(S.lazyFn?S.lazyFn().then(ze=>{Object.assign(S.options,ze.options)}):Promise.resolve());const Fe=this.getMatch(w).componentsPromise||S._lazyPromise.then(()=>Promise.all(ha.map(async ze=>{const pr=S.options[ze];pr!=null&&pr.preload&&await pr.preload()})));o(w,ze=>({...ze,isFetching:"loader",componentsPromise:Fe})),await S._lazyPromise;let we=await((le=(me=S.options).loader)==null?void 0:le.call(me,P()));this.serializeLoaderData&&(we=this.serializeLoaderData("loaderData",we,{router:this,match:this.getMatch(w)})),h(this.getMatch(w),we),await Ht();const rt=(A=(X=S.options).meta)==null?void 0:A.call(X,{matches:s,match:this.getMatch(w),params:this.getMatch(w).params,loaderData:we}),fi=(Se=(se=S.options).headers)==null?void 0:Se.call(se,{loaderData:we});o(w,ze=>({...ze,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:we,meta:rt,headers:fi}))}catch(Fe){let we=Fe;await Ht(),h(this.getMatch(w),Fe);try{(as=(os=S.options).onError)==null||as.call(os,Fe)}catch(rt){we=rt,h(this.getMatch(w),rt)}o(w,rt=>({...rt,error:we,status:"error",isFetching:!1}))}await this.getMatch(w).componentsPromise}catch(Ht){h(this.getMatch(w),Ht)}},{status:re,invalid:tt}=this.getMatch(w);n&&S.options.preload===!1||(re==="success"&&(tt||(N??K>Z))?(async()=>{try{await Q()}catch{}})():re!=="success"&&await Q());const{loaderPromise:qe,loadPromise:L}=this.getMatch(w);qe==null||qe.resolve(),L==null||L.resolve()}o(w,k=>({...k,isFetching:!1,loaderPromise:void 0}))})())}),await Promise.all(x),d()}catch(y){f(y)}})()}),await l()}catch(d){if(Ke(d)||pe(d))throw pe(d)&&!n&&await l(),d}return s},this.invalidate=()=>{const r=s=>({...s,invalid:!0,...s.status==="error"?{status:"pending",error:void 0}:{}});return this.__store.setState(s=>{var n;return{...s,matches:s.matches.map(r),cachedMatches:s.cachedMatches.map(r),pendingMatches:(n=s.pendingMatches)==null?void 0:n.map(r)}}),this.load()},this.resolveRedirect=r=>{const s=r;return s.href||(s.href=this.buildLocation(s).href),s},this.cleanCache=()=>{this.__store.setState(r=>({...r,cachedMatches:r.cachedMatches.filter(s=>{const n=this.looseRoutesById[s.routeId];if(!n.options.loader)return!1;const i=(s.preload?n.options.preloadGcTime??this.options.defaultPreloadGcTime:n.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return s.status!=="error"&&Date.now()-s.updatedAt<i})}))},this.preloadRoute=async r=>{const s=this.buildLocation(r);let n=this.matchRoutes(s,{throwOnError:!0,preload:!0});const i=Object.fromEntries([...this.state.matches,...this.state.pendingMatches??[],...this.state.cachedMatches].map(a=>[a.id,!0]));this.__store.batch(()=>{n.forEach(a=>{i[a.id]||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,a]}))})});const o=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id));try{return n=await this.loadMatches({matches:n,location:s,preload:!0,updateMatch:(a,u)=>{o.has(a)?n=n.map(l=>l.id===a?u(l):l):this.updateMatch(a,u)}}),n}catch(a){return Ke(a)?await this.preloadRoute({...a,_fromLocation:s}):void 0}},this.matchRoute=(r,s)=>{const n={...r,to:r.to?this.resolvePathWithBase(r.from||"",r.to):void 0,params:r.params||{},leaveParams:!0},i=this.buildLocation(n);if(s!=null&&s.pending&&this.state.status!=="pending")return!1;const a=((s==null?void 0:s.pending)===void 0?!this.state.isLoading:s.pending)?this.latestLocation:this.state.resolvedLocation,u=Jt(this.basepath,a.pathname,{...s,to:i.pathname});return!u||r.params&&!It(u,r.params,!0)?!1:u&&((s==null?void 0:s.includeSearch)??!0)?It(a.search,i.search,!0)?u:!1:u},this.dehydrate=()=>{var r;const s=((r=this.options.errorSerializer)==null?void 0:r.serialize)??va;return{state:{dehydratedMatches:this.state.matches.map(n=>({...Ft(n,["id","status","updatedAt"]),error:n.error?{data:s(n.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var r,s,n;let i;typeof document<"u"&&(i=this.options.transformer.parse((r=window.__TSR__)==null?void 0:r.dehydrated)),te(i),this.dehydratedData=i.payload,(n=(s=this.options).hydrate)==null||n.call(s,i.payload);const o=i.router.state,a=this.matchRoutes(this.state.location).map(u=>{const l=o.dehydratedMatches.find(h=>h.id===u.id);return te(l,`Could not find a client-side match for dehydrated match with id: ${u.id}!`),{...u,...l}});this.__store.setState(u=>({...u,matches:a})),this.manifest=i.router.manifest},this.injectedHtml=[],this.injectHtml=r=>{const s=()=>(this.injectedHtml=this.injectedHtml.filter(n=>n!==s),r);this.injectedHtml.push(s)},this.streamedKeys=new Set,this.getStreamedValue=r=>{var s;if(this.isServer)return;const n=(s=window.__TSR__)==null?void 0:s.streamedValues[r];if(n)return n.parsed||(n.parsed=this.options.transformer.parse(n.value)),n.parsed},this.streamValue=(r,s)=>{var n;Tt(!this.streamedKeys.has(r),"Key has already been streamed: "+r),this.streamedKeys.add(r);const i=`__TSR__.streamedValues['${r}'] = { value: ${(n=this.serializer)==null?void 0:n.call(this,this.options.transformer.stringify(s))}}`;this.injectHtml(`<script class='tsr-once'>${i}; __TSR__.cleanScripts()<\/script>`)},this._handleNotFound=(r,s,{updateMatch:n=this.updateMatch}={})=>{const i=Object.fromEntries(r.map(u=>[u.routeId,u]));let o=(s.global?this.looseRoutesById[ie]:this.looseRoutesById[s.routeId])||this.looseRoutesById[ie];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==ie;)o=o.parentRoute,te(o);const a=i[o.id];te(a,"Could not find match for route: "+o.id),n(a.id,u=>({...u,status:"notFound",error:s,isFetching:!1})),s.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(s.routeId=o.parentRoute.id,this._handleNotFound(r,s,{updateMatch:n}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(r=>r.status==="notFound"||r.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??ea,parseSearch:t.parseSearch??Yo,transformer:t.transformer??da}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(t,r,s){return typeof t=="string"?this.matchRoutesInternal({pathname:t,search:r},s):this.matchRoutesInternal(t,r)}matchRoutesInternal(t,r){let s={};const n=this.flatRoutes.find(d=>{const f=Jt(this.basepath,He(t.pathname),{to:d.fullPath,caseSensitive:d.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});return f?(s=f,!0):!1});let i=n||this.routesById[ie];const o=[i];let a=!1;for((n?n.path!=="/"&&s["**"]:He(t.pathname))&&(this.options.notFoundRoute?o.push(this.options.notFoundRoute):a=!0);i.parentRoute;)i=i.parentRoute,o.unshift(i);const u=(()=>{if(a){if(this.options.notFoundMode!=="root")for(let d=o.length-1;d>=0;d--){const f=o[d];if(f.children)return f.id}return ie}})(),l=o.map(d=>{var f;let g;const v=((f=d.options.params)==null?void 0:f.parse)??d.options.parseParams;if(v)try{const p=v(s);Object.assign(s,p)}catch(p){if(g=new ga(p.message,{cause:p}),r!=null&&r.throwOnError)throw g;return g}}),h=[];return o.forEach((d,f)=>{var g,v,p,y,b,x,w,C,F,T,k,S;const P=h[f-1],[K,Z]=(()=>{const A=(P==null?void 0:P.search)??t.search;try{const se=typeof d.options.validateSearch=="object"?d.options.validateSearch.parse:d.options.validateSearch,Se=(se==null?void 0:se(A))??{};return[{...A,...Se},void 0]}catch(se){const Se=new pa(se.message,{cause:se});if(r!=null&&r.throwOnError)throw Se;return[A,Se]}})(),H=((v=(g=d.options).loaderDeps)==null?void 0:v.call(g,{search:K}))??"",N=H?JSON.stringify(H):"",Q=Sr({path:d.fullPath,params:s}),re=Sr({path:d.id,params:s,leaveWildcards:!0})+N,tt=this.getMatch(re),qe=this.state.matches.find(A=>A.id===re)?"stay":"enter";let L;if(tt)L={...tt,cause:qe,params:s};else{const A=d.options.loader||d.options.beforeLoad||d.lazyFn?"pending":"success";L={id:re,index:f,routeId:d.id,params:s,pathname:Ue([this.basepath,Q]),updatedAt:Date.now(),search:{},searchError:void 0,status:A,isFetching:!1,error:void 0,paramsError:l[f],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:qe,loaderDeps:H,invalid:!1,preload:!1,links:(y=(p=d.options).links)==null?void 0:y.call(p),scripts:(x=(b=d.options).scripts)==null?void 0:x.call(b),staticData:d.options.staticData||{},loadPromise:nt(),fullPath:d.fullPath}}L.status==="success"&&(L.meta=(C=(w=d.options).meta)==null?void 0:C.call(w,{matches:h,match:L,params:L.params,loaderData:L.loaderData}),L.headers=(T=(F=d.options).headers)==null?void 0:T.call(F,{loaderData:L.loaderData})),r!=null&&r.preload||(L.globalNotFound=u===d.id),L.search=st(L.search,K),L.searchError=Z;const le=(P==null?void 0:P.id)?P.context??this.options.context??{}:this.options.context??{};L.context={...le,...L.__routeContext,...L.__beforeLoadContext};const X={search:L.search,params:L.params,context:L.context,location:t,navigate:A=>this.navigate({...A,_fromLocation:t}),buildLocation:this.buildLocation,cause:L.cause,abortController:L.abortController,preload:!!L.preload};L.__routeContext=((S=(k=d.options).context)==null?void 0:S.call(k,X))??{},L.context={...le,...L.__routeContext,...L.__beforeLoadContext},h.push(L)}),h}}class pa extends Error{}class ga extends Error{}function ya(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...e},location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function va(e){return e instanceof Error?{name:e.name,message:e.message}:{data:e}}function Es(e){return!(typeof e=="object"&&e&&"data"in e)||!("__isServerError"in e&&e.__isServerError)||!(typeof e.data=="object"&&e.data)?!1:e.__isServerError===!0}function Fs(e){if("name"in e&&"message"in e){const t=new Error(e.message);return t.name=e.name,t}return e.data}const hr=_.createContext(void 0);function _t(e){const t=_.useContext(hr);return ce({select:s=>{const n=s.matches.find(i=>e.from?e.from===i.routeId:i.id===t);if(te(!((e.shouldThrow??!0)&&!n),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),n!==void 0)return e.select?e.select(n):n}})}function ba(e){return _t({...e,select:t=>typeof e.select=="function"?e.select(t.loaderDeps):t.loaderDeps})}function xa(e){return _t({...e,select:t=>typeof e.select=="function"?e.select(t.loaderData):t.loaderData})}function Sa(e){return _t({...e,select:t=>e.select?e.select(t.params):t.params})}function wa(e){return _t({...e,select:t=>e.select?e.select(t.search):t.search})}function Tn(e){const{navigate:t}=Ee();return _.useCallback(r=>t({...r}),[t])}function _a(e){const{navigate:t}=Ee();return _.useEffect(()=>{t({...e})},[]),null}class kn{constructor(t){this.init=r=>{var s,n;this.originalIndex=r.originalIndex;const i=this.options,o=!(i!=null&&i.path)&&!(i!=null&&i.id);this.parentRoute=(n=(s=this.options).getParentRoute)==null?void 0:n.call(s),o?this.path=ie:te(this.parentRoute);let a=o?ie:i.path;a&&a!=="/"&&(a=Zr(a));const u=(i==null?void 0:i.id)||a;let l=o?ie:Ue([this.parentRoute.id===ie?"":this.parentRoute.id,u]);a===ie&&(a="/"),l!==ie&&(l=Ue(["/",l]));const h=l===ie?"/":Ue([this.parentRoute.fullPath,a]);this.path=a,this.id=l,this.fullPath=h,this.to=h},this.updateLoader=r=>(Object.assign(this.options,r),this),this.update=r=>(Object.assign(this.options,r),this),this.lazy=r=>(this.lazyFn=r,this),this.useMatch=r=>_t({...r,from:this.id}),this.useRouteContext=r=>_t({...r,from:this.id,select:s=>r!=null&&r.select?r.select(s.context):s.context}),this.useSearch=r=>wa({...r,from:this.id}),this.useParams=r=>Sa({...r,from:this.id}),this.useLoaderDeps=r=>ba({...r,from:this.id}),this.useLoaderData=r=>xa({...r,from:this.id}),this.useNavigate=()=>Tn({from:this.id}),this.options=t||{},this.isRoot=!(t!=null&&t.getParentRoute),te(!(t!=null&&t.id&&(t!=null&&t.path))),this.$$typeof=Symbol.for("react.memo")}addChildren(t){return this.children=Array.isArray(t)?t:Object.values(t),this}}function $e(e){return new kn(e)}function ja(){return e=>Ra(e)}class Ca extends kn{constructor(t){super(t)}addChildren(t){return super.addChildren(t)}}function Ra(e){return new Ca(e)}function Pa(){const e=Ee(),t=_.useRef({router:e,mounted:!1}),r=ce({select:l=>Ft(l,["isLoading","location","resolvedLocation","isTransitioning"])}),[s,n]=_.useTransition(),i=ce({select:l=>l.matches.some(h=>h.status==="pending")}),o=Cs(r.isLoading),a=r.isLoading||s||i,u=Cs(a);return e.isServer||(e.startReactTransition=n),_.useEffect(()=>{const l=e.history.subscribe(e.load),h=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0});return He(e.latestLocation.href)!==He(h.href)&&e.commitLocation({...h,replace:!0}),()=>{l()}},[e,e.history]),xr(()=>{var l;if(typeof window<"u"&&((l=window.__TSR__)!=null&&l.dehydrated)||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch{}})()},[e]),xr(()=>{if(o&&!r.isLoading){const l=e.state.location,h=e.state.resolvedLocation,d=h.href!==l.href;e.emit({type:"onLoad",fromLocation:h,toLocation:l,pathChanged:d})}},[o,e,r.isLoading]),xr(()=>{if(u&&!a){const l=e.state.location,h=e.state.resolvedLocation,d=h.href!==l.href;if(e.emit({type:"onResolved",fromLocation:h,toLocation:l,pathChanged:d}),e.__store.setState(f=>({...f,status:"idle",resolvedLocation:f.location})),typeof document<"u"&&document.querySelector&&e.state.location.hash!==""){const f=document.getElementById(e.state.location.hash);f&&f.scrollIntoView()}}},[a,u,e]),null}function er(e){return c.jsx(c.Fragment,{children:e.children})}function An(e,t,r){return t.options.notFoundComponent?c.jsx(t.options.notFoundComponent,{data:r}):e.options.defaultNotFoundComponent?c.jsx(e.options.defaultNotFoundComponent,{data:r}):c.jsx(ua,{})}const Dn=_.memo(function({matchId:t}){var r,s;const n=Ee(),i=ce({select:y=>{var b;return(b=y.matches.find(x=>x.id===t))==null?void 0:b.routeId}});te(i);const o=n.routesById[i],a=o.options.pendingComponent??n.options.defaultPendingComponent,u=a?c.jsx(a,{}):null,l=o.options.errorComponent??n.options.defaultErrorComponent,h=o.options.onCatch??n.options.defaultOnCatch,d=o.isRoot?o.options.notFoundComponent??((r=n.options.notFoundRoute)==null?void 0:r.options.component):o.options.notFoundComponent,f=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??a??((s=o.options.errorComponent)==null?void 0:s.preload))?_.Suspense:er,g=l?Xr:er,v=d?la:er,p=ce({select:y=>y.loadedAt});return c.jsx(hr.Provider,{value:t,children:c.jsx(f,{fallback:u,children:c.jsx(g,{getResetKey:()=>p,errorComponent:l||dr,onCatch:(y,b)=>{if(pe(y))throw y;Tt(!1,`Error in route match: ${t}`),h==null||h(y,b)},children:c.jsx(v,{fallback:y=>{if(!d||y.routeId&&y.routeId!==i||!y.routeId&&!o.isRoot)throw y;return _.createElement(d,y)},children:c.jsx(Ea,{matchId:t})})})})})}),Ea=_.memo(function({matchId:t}){var r,s,n;const i=Ee(),{match:o,matchIndex:a,routeId:u}=ce({select:f=>{const g=f.matches.findIndex(y=>y.id===t),v=f.matches[g];return{routeId:v.routeId,matchIndex:g,match:Ft(v,["id","status","error","loadPromise"])}}}),l=i.routesById[u],h=_.useMemo(()=>{const f=l.options.component??i.options.defaultComponent;return f?c.jsx(f,{},u):c.jsx(Nn,{})},[u,l.options.component,i.options.defaultComponent]),d=(l.options.errorComponent??i.options.defaultErrorComponent)||dr;if(o.status==="notFound"){let f;return Es(o.error)?f=(((r=i.options.errorSerializer)==null?void 0:r.deserialize)??Fs)(o.error.data):f=o.error,te(pe(f)),An(i,l,f)}if(o.status==="redirected")throw te(Ke(o.error)),o.loadPromise;if(o.status==="error"){if(i.isServer)return c.jsx(d,{error:o.error,info:{componentStack:""}});throw Es(o.error)?(((s=i.options.errorSerializer)==null?void 0:s.deserialize)??Fs)(o.error.data):o.error}if(o.status==="pending"){const f=l.options.pendingMinMs??i.options.defaultPendingMinMs;if(f&&!((n=i.getMatch(o.id))!=null&&n.minPendingPromise)&&!i.isServer){const g=nt();Promise.resolve().then(()=>{i.updateMatch(o.id,v=>({...v,minPendingPromise:g}))}),setTimeout(()=>{g.resolve(),i.updateMatch(o.id,v=>({...v,minPendingPromise:void 0}))},f)}throw o.loadPromise}return c.jsxs(c.Fragment,{children:[h,i.AfterEachMatch?c.jsx(i.AfterEachMatch,{match:o,matchIndex:a}):null]})}),Nn=_.memo(function(){const t=Ee(),r=_.useContext(hr),s=ce({select:l=>{var h;return(h=l.matches.find(d=>d.id===r))==null?void 0:h.routeId}}),n=t.routesById[s],{parentGlobalNotFound:i}=ce({select:l=>{const d=l.matches.find(f=>f.id===r);return te(d),{parentGlobalNotFound:d.globalNotFound}}}),o=ce({select:l=>{var h;const d=l.matches,f=d.findIndex(g=>g.id===r);return(h=d[f+1])==null?void 0:h.id}});if(i)return An(t,n,void 0);if(!o)return null;const a=c.jsx(Dn,{matchId:o}),u=t.options.defaultPendingComponent?c.jsx(t.options.defaultPendingComponent,{}):null;return r===ie?c.jsx(_.Suspense,{fallback:u,children:a}):a});function Fa(){const e=Ee(),t=e.options.defaultPendingComponent?c.jsx(e.options.defaultPendingComponent,{}):null,r=e.isServer||typeof document<"u"&&window.__TSR__?er:_.Suspense,s=c.jsxs(r,{fallback:t,children:[c.jsx(Pa,{}),c.jsx(Ia,{})]});return e.options.InnerWrap?c.jsx(e.options.InnerWrap,{children:s}):s}function Ia(){const e=ce({select:r=>{var s;return(s=r.matches[0])==null?void 0:s.id}}),t=ce({select:r=>r.loadedAt});return c.jsx(hr.Provider,{value:e,children:c.jsx(Xr,{getResetKey:()=>t,errorComponent:dr,onCatch:r=>{Tt(!1,"The following error wasn't caught by any route! At the very least, consider setting an 'errorComponent' in your RootRoute!"),Tt(!1,r.message||r.toString())},children:e?c.jsx(Dn,{matchId:e}):null})})}function La({router:e,children:t,...r}){e.update({...e.options,...r,context:{...e.options.context,...r.context}});const s=En(),n=c.jsx(s.Provider,{value:e,children:t});return e.options.Wrap?c.jsx(e.options.Wrap,{children:n}):n}function Oa({router:e,...t}){return c.jsx(La,{router:e,...t,children:c.jsx(Fa,{})})}const ar="token",Ma="clean_url_auto",Ta=()=>{},Yr="",ka=`${Yr}/v1/site/favicon?key=`,Un="%[a-f0-9]{2}",Is=new RegExp("("+Un+")|([^%]+?)","gi"),Ls=new RegExp("("+Un+")+","gi");function Nr(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;const r=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],Nr(r),Nr(s))}function Aa(e){try{return decodeURIComponent(e)}catch{let t=e.match(Is)||[];for(let r=1;r<t.length;r++)e=Nr(t,r).join(""),t=e.match(Is)||[];return e}}function Da(e){const t={"%FE%FF":"��","%FF%FE":"��"};let r=Ls.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{const n=Aa(r[0]);n!==r[0]&&(t[r[0]]=n)}r=Ls.exec(e)}t["%C2"]="�";const s=Object.keys(t);for(const n of s)e=e.replace(new RegExp(n,"g"),t[n]);return e}function Na(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return Da(e)}}function Ua(e,t){const r={};if(Array.isArray(t))for(const s of t){const n=Object.getOwnPropertyDescriptor(e,s);n!=null&&n.enumerable&&Object.defineProperty(r,s,n)}else for(const s of Reflect.ownKeys(e)){const n=Object.getOwnPropertyDescriptor(e,s);if(n.enumerable){const i=e[s];t(s,i,e)&&Object.defineProperty(r,s,n)}}return r}function $n(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];const r=e.indexOf(t);return r===-1?[]:[e.slice(0,r),e.slice(r+t.length)]}const $a=e=>e==null,qa=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Ur=Symbol("encodeFragmentIdentifier");function za(e){switch(e.arrayFormat){case"index":return t=>(r,s)=>{const n=r.length;return s===void 0||e.skipNull&&s===null||e.skipEmptyString&&s===""?r:s===null?[...r,[$(t,e),"[",n,"]"].join("")]:[...r,[$(t,e),"[",$(n,e),"]=",$(s,e)].join("")]};case"bracket":return t=>(r,s)=>s===void 0||e.skipNull&&s===null||e.skipEmptyString&&s===""?r:s===null?[...r,[$(t,e),"[]"].join("")]:[...r,[$(t,e),"[]=",$(s,e)].join("")];case"colon-list-separator":return t=>(r,s)=>s===void 0||e.skipNull&&s===null||e.skipEmptyString&&s===""?r:s===null?[...r,[$(t,e),":list="].join("")]:[...r,[$(t,e),":list=",$(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(s,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?s:(n=n===null?"":n,s.length===0?[[$(r,e),t,$(n,e)].join("")]:[[s,$(n,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,s)=>s===void 0||e.skipNull&&s===null||e.skipEmptyString&&s===""?r:s===null?[...r,$(t,e)]:[...r,[$(t,e),"=",$(s,e)].join("")]}}function Ba(e){let t;switch(e.arrayFormat){case"index":return(r,s,n)=>{if(t=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!t){n[r]=s;return}n[r]===void 0&&(n[r]={}),n[r][t[1]]=s};case"bracket":return(r,s,n)=>{if(t=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!t){n[r]=s;return}if(n[r]===void 0){n[r]=[s];return}n[r]=[...n[r],s]};case"colon-list-separator":return(r,s,n)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){n[r]=s;return}if(n[r]===void 0){n[r]=[s];return}n[r]=[...n[r],s]};case"comma":case"separator":return(r,s,n)=>{const i=typeof s=="string"&&s.includes(e.arrayFormatSeparator),o=typeof s=="string"&&!i&&je(s,e).includes(e.arrayFormatSeparator);s=o?je(s,e):s;const a=i||o?s.split(e.arrayFormatSeparator).map(u=>je(u,e)):s===null?s:je(s,e);n[r]=a};case"bracket-separator":return(r,s,n)=>{const i=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!i){n[r]=s&&je(s,e);return}const o=s===null?[]:s.split(e.arrayFormatSeparator).map(a=>je(a,e));if(n[r]===void 0){n[r]=o;return}n[r]=[...n[r],...o]};default:return(r,s,n)=>{if(n[r]===void 0){n[r]=s;return}n[r]=[...[n[r]].flat(),s]}}}function qn(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function $(e,t){return t.encode?t.strict?qa(e):encodeURIComponent(e):e}function je(e,t){return t.decode?Na(e):e}function zn(e){return Array.isArray(e)?e.sort():typeof e=="object"?zn(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function Bn(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function Ka(e){let t="";const r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function Os(e,t,r){return r==="string"&&typeof e=="string"?e:typeof r=="function"&&typeof e=="string"?r(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")?e.toLowerCase()==="true":r==="number"&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""||t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?Number(e):e}function es(e){e=Bn(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function ts(e,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null),...t},qn(t.arrayFormatSeparator);const r=Ba(t),s=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return s;for(const n of e.split("&")){if(n==="")continue;const i=t.decode?n.replaceAll("+"," "):n;let[o,a]=$n(i,"=");o===void 0&&(o=i),a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:je(a,t),r(je(o,t),a,s)}for(const[n,i]of Object.entries(s))if(typeof i=="object"&&i!==null&&t.types[n]!=="string")for(const[o,a]of Object.entries(i)){const u=t.types[n]?t.types[n].replace("[]",""):void 0;i[o]=Os(a,t,u)}else typeof i=="object"&&i!==null&&t.types[n]==="string"?s[n]=Object.values(i).join(t.arrayFormatSeparator):s[n]=Os(i,t,t.types[n]);return t.sort===!1?s:(t.sort===!0?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce((n,i)=>{const o=s[i];return n[i]=o&&typeof o=="object"&&!Array.isArray(o)?zn(o):o,n},Object.create(null))}function Kn(e,t){if(!e)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},qn(t.arrayFormatSeparator);const r=o=>t.skipNull&&$a(e[o])||t.skipEmptyString&&e[o]==="",s=za(t),n={};for(const[o,a]of Object.entries(e))r(o)||(n[o]=a);const i=Object.keys(n);return t.sort!==!1&&i.sort(t.sort),i.map(o=>{const a=e[o];return a===void 0?"":a===null?$(o,t):Array.isArray(a)?a.length===0&&t.arrayFormat==="bracket-separator"?$(o,t)+"[]":a.reduce(s(o),[]).join("&"):$(o,t)+"="+$(a,t)}).filter(o=>o.length>0).join("&")}function Hn(e,t){var n;t={decode:!0,...t};let[r,s]=$n(e,"#");return r===void 0&&(r=e),{url:((n=r==null?void 0:r.split("?"))==null?void 0:n[0])??"",query:ts(es(e),t),...t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:je(s,t)}:{}}}function Qn(e,t){t={encode:!0,strict:!0,[Ur]:!0,...t};const r=Bn(e.url).split("?")[0]||"",s=es(e.url),n={...ts(s,{sort:!1}),...e.query};let i=Kn(n,t);i&&(i=`?${i}`);let o=Ka(e.url);if(typeof e.fragmentIdentifier=="string"){const a=new URL(r);a.hash=e.fragmentIdentifier,o=t[Ur]?a.hash:`#${e.fragmentIdentifier}`}return`${r}${i}${o}`}function Vn(e,t,r){r={parseFragmentIdentifier:!0,[Ur]:!1,...r};const{url:s,query:n,fragmentIdentifier:i}=Hn(e,r);return Qn({url:s,query:Ua(n,t),fragmentIdentifier:i},r)}function Ha(e,t,r){const s=Array.isArray(t)?n=>!t.includes(n):(n,i)=>!t(n,i);return Vn(e,s,r)}const Qa=Object.freeze(Object.defineProperty({__proto__:null,exclude:Ha,extract:es,parse:ts,parseUrl:Hn,pick:Vn,stringify:Kn,stringifyUrl:Qn},Symbol.toStringTag,{value:"Module"})),rs=Ri.create({baseURL:Yr,paramsSerializer:e=>Qa.stringify(e,{arrayFormat:"none"})});rs.interceptors.request.use(e=>{e.headers=e.headers||{};const t=localStorage.getItem(ar);return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>{});rs.interceptors.response.use(e=>new Promise((t,r)=>{const s=e.status||0,{code:n}=e.data;(s===403||n&&n===403)&&(he.error("请刷新页面登录"),r(e)),t(e)}),e=>new Promise((t,r)=>{(e.response.status||0)===403&&he.error("请刷新页面登录"),r(e)}));const D=e=>new Promise((t,r)=>{rs({method:e.method,url:e.url,data:e.data,params:e.params,headers:e.headers}).then(s=>{t(s.data)}).catch(s=>{r(s)})}),Ou=e=>D({url:"/v1/user/login",method:"post",data:e}),Va=()=>D({url:"/auth/v1/user/info",method:"get"}),Wa={BASE_URL:"/app",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"",VITE_ICON_PROXY:"https://icones.xwd.pw"},Ms=e=>{let t;const r=new Set,s=(h,d)=>{const f=typeof h=="function"?h(t):h;if(!Object.is(f,t)){const g=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(v=>v(t,g))}},n=()=>t,u={setState:s,getState:n,getInitialState:()=>l,subscribe:h=>(r.add(h),()=>r.delete(h)),destroy:()=>{r.clear()}},l=t=e(s,n,u);return u},Ga=e=>e?Ms(e):Ms,Wn={BASE_URL:"/app",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"",VITE_ICON_PROXY:"https://icones.xwd.pw"},{useDebugValue:Ja}=Pi,{useSyncExternalStoreWithSelector:Za}=Vo;let Ts=!1;const Xa=e=>e;function Ya(e,t=Xa,r){(Wn?"production":void 0)!=="production"&&r&&!Ts&&(Ts=!0);const s=Za(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Ja(s),s}const ec=e=>{const t=typeof e=="function"?Ga(e):e,r=(s,n)=>Ya(t,s,n);return Object.assign(r,t),r},tc=e=>ec,tr={BASE_URL:"/app",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"",VITE_ICON_PROXY:"https://icones.xwd.pw"},$r=new Map,Zt=e=>{const t=$r.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([r,s])=>[r,s.getState()])):{}},rc=(e,t,r)=>{if(e===void 0)return{type:"untracked",connection:t.connect(r)};const s=$r.get(r.name);if(s)return{type:"tracked",store:e,...s};const n={connection:t.connect(r),stores:{}};return $r.set(r.name,n),{type:"tracked",store:e,...n}},sc=(e,t={})=>(r,s,n)=>{const{enabled:i,anonymousActionType:o,store:a,...u}=t;let l;try{l=(i??(tr?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!l)return e(r,s,n);const{connection:h,...d}=rc(a,l,u);let f=!0;n.setState=(p,y,b)=>{const x=r(p,y);if(!f)return x;const w=b===void 0?{type:o||"anonymous"}:typeof b=="string"?{type:b}:b;return a===void 0?(h==null||h.send(w,s()),x):(h==null||h.send({...w,type:`${a}/${w.type}`},{...Zt(u.name),[a]:n.getState()}),x)};const g=(...p)=>{const y=f;f=!1,r(...p),f=y},v=e(n.setState,s,n);if(d.type==="untracked"?h==null||h.init(v):(d.stores[d.store]=n,h==null||h.init(Object.fromEntries(Object.entries(d.stores).map(([p,y])=>[p,p===d.store?v:y.getState()])))),n.dispatchFromDevtools&&typeof n.dispatch=="function"){let p=!1;const y=n.dispatch;n.dispatch=(...b)=>{(tr?"production":void 0)!=="production"&&b[0].type==="__setState"&&!p&&(p=!0),y(...b)}}return h.subscribe(p=>{var y;switch(p.type){case"ACTION":return typeof p.payload!="string"?void 0:wr(p.payload,b=>{if(b.type==="__setState"){if(a===void 0){g(b.state);return}Object.keys(b.state).length;const x=b.state[a];if(x==null)return;JSON.stringify(n.getState())!==JSON.stringify(x)&&g(x);return}n.dispatchFromDevtools&&typeof n.dispatch=="function"&&n.dispatch(b)});case"DISPATCH":switch(p.payload.type){case"RESET":return g(v),a===void 0?h==null?void 0:h.init(n.getState()):h==null?void 0:h.init(Zt(u.name));case"COMMIT":if(a===void 0){h==null||h.init(n.getState());return}return h==null?void 0:h.init(Zt(u.name));case"ROLLBACK":return wr(p.state,b=>{if(a===void 0){g(b),h==null||h.init(n.getState());return}g(b[a]),h==null||h.init(Zt(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return wr(p.state,b=>{if(a===void 0){g(b);return}JSON.stringify(n.getState())!==JSON.stringify(b[a])&&g(b[a])});case"IMPORT_STATE":{const{nextLiftedState:b}=p.payload,x=(y=b.computedStates.slice(-1)[0])==null?void 0:y.state;if(!x)return;g(a===void 0?x:x[a]),h==null||h.send(null,b);return}case"PAUSE_RECORDING":return f=!f}return}}),v},nc=sc,wr=(e,t)=>{let r;try{r=JSON.parse(e)}catch{}r!==void 0&&t(r)};function ic(e,t){let r;try{r=e()}catch{return}return{getItem:n=>{var i;const o=u=>u===null?null:JSON.parse(u,void 0),a=(i=r.getItem(n))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(n,i)=>r.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>r.removeItem(n)}}const kt=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(s){return kt(s)(r)},catch(s){return this}}}catch(r){return{then(s){return this},catch(s){return kt(s)(r)}}}},oc=(e,t)=>(r,s,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,b)=>({...b,...y}),...t},o=!1;const a=new Set,u=new Set;let l;try{l=i.getStorage()}catch{}if(!l)return e((...y)=>{r(...y)},s,n);const h=kt(i.serialize),d=()=>{const y=i.partialize({...s()});let b;const x=h({state:y,version:i.version}).then(w=>l.setItem(i.name,w)).catch(w=>{b=w});if(b)throw b;return x},f=n.setState;n.setState=(y,b)=>{f(y,b),d()};const g=e((...y)=>{r(...y),d()},s,n);let v;const p=()=>{var y;if(!l)return;o=!1,a.forEach(x=>x(s()));const b=((y=i.onRehydrateStorage)==null?void 0:y.call(i,s()))||void 0;return kt(l.getItem.bind(l))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version)}else return x.state}).then(x=>{var w;return v=i.merge(x,(w=s())!=null?w:g),r(v,!0),d()}).then(()=>{b==null||b(v,void 0),o=!0,u.forEach(x=>x(v))}).catch(x=>{b==null||b(void 0,x)})};return n.persist={setOptions:y=>{i={...i,...y},y.getStorage&&(l=y.getStorage())},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:y=>(a.add(y),()=>{a.delete(y)}),onFinishHydration:y=>(u.add(y),()=>{u.delete(y)})},p(),v||g},ac=(e,t)=>(r,s,n)=>{let i={storage:ic(()=>localStorage),partialize:p=>p,version:0,merge:(p,y)=>({...y,...p}),...t},o=!1;const a=new Set,u=new Set;let l=i.storage;if(!l)return e((...p)=>{r(...p)},s,n);const h=()=>{const p=i.partialize({...s()});return l.setItem(i.name,{state:p,version:i.version})},d=n.setState;n.setState=(p,y)=>{d(p,y),h()};const f=e((...p)=>{r(...p),h()},s,n);n.getInitialState=()=>f;let g;const v=()=>{var p,y;if(!l)return;o=!1,a.forEach(x=>{var w;return x((w=s())!=null?w:f)});const b=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(p=s())!=null?p:f))||void 0;return kt(l.getItem.bind(l))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)]}else return[!1,x.state];return[!1,void 0]}).then(x=>{var w;const[C,F]=x;if(g=i.merge(F,(w=s())!=null?w:f),r(g,!0),C)return h()}).then(()=>{b==null||b(g,void 0),g=s(),o=!0,u.forEach(x=>x(g))}).catch(x=>{b==null||b(void 0,x)})};return n.persist={setOptions:p=>{i={...i,...p},p.storage&&(l=p.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(u.add(p),()=>{u.delete(p)})},i.skipHydration||v(),g||f},cc=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?oc(e,t):ac(e,t),lc=cc,ks=()=>({id:0,role:"",create_time:"",update_time:"",username:"",token:""}),uc=tc()(nc(lc((e,t)=>({userInfo:ks(),updateUser:r=>e({userInfo:{...t().userInfo,...r}}),resetInfo:()=>e({userInfo:ks()})}),{name:"user-info"}))),Gn=_.createContext(null),dc=({children:e})=>{const{userInfo:t,resetInfo:r,updateUser:s}=uc(),n=_.useMemo(()=>!!t.token,[t]),{data:i}=et({queryKey:["userInfo"],queryFn:()=>Va(),enabled:n});_.useEffect(()=>{i&&s({...i.data})},[i,s]);const o=(u,l)=>{s(u),localStorage.setItem(ar,u.token||""),rr.set("token",u.token||""),l==null||l()},a=u=>{r(),localStorage.removeItem(ar),rr.remove("token"),u==null||u()};return c.jsx(Gn.Provider,{value:{logout:a,user:t,logged:n,toLogin:o},children:e})},hc=()=>_.useContext(Gn),fc="modulepreload",mc=function(e){return"/app/"+e},As={},Jn=function(t,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(r.map(a=>{if(a=mc(a),a in As)return;As[a]=!0;const u=a.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":fc,u||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},pc="admin-wrapper_TXoww",gc="admin-toolbar_tP0P4",yc="admin-toolbar-title_o5a3Z",vc="admin-content_FjWdT",fr={"admin-wrapper":"admin-wrapper_TXoww",adminWrapper:pc,"admin-toolbar":"admin-toolbar_tP0P4",adminToolbar:gc,"admin-toolbar-title":"admin-toolbar-title_o5a3Z",adminToolbarTitle:yc,"admin-content":"admin-content_FjWdT",adminContent:vc},Ct=({children:e})=>c.jsx("div",{className:fr.adminContent,children:e}),zt=({children:e,className:t=""})=>c.jsx("h2",{className:`${fr.adminToolbarTitle} ${t}`,children:e}),bc=({children:e})=>c.jsx("div",{className:fr.adminToolbar,children:e}),Bt=({children:e,toolbar:t})=>c.jsxs("div",{className:fr.adminWrapper,children:[t&&c.jsx(bc,{children:t}),c.jsx(Ct,{children:e})]}),xc=e=>c.jsx(c.Fragment,{children:c.jsx(Bt,{toolbar:c.jsxs("div",{className:"line-center justify-between flex-wrap",children:[c.jsx(zt,{className:"text-sm",children:"后台首页"}),c.jsx("div",{className:"line-center gap-2 flex-wrap"})]}),children:c.jsx(Ct,{children:c.jsx("p",{className:"",children:"hello index page"})})})}),Sc=$e({getParentRoute:()=>Rt,component:()=>c.jsx(xc,{}),path:"/"}),wc=e=>D({url:"/admin/v1/data_list/create",method:"post",data:e}),_c=e=>D({url:"/admin/v1/data_list/update",method:"post",data:e}),jc=e=>D({url:"/admin/v1/data_list/list",method:"get",params:e}),Cc=e=>D({url:"/admin/v1/data_list/delete",method:"post",data:e}),Rc=e=>D({url:"/admin/v1/data_list/sort_data",method:"get",params:e}),Pc=e=>D({url:"/admin/v1/data_list/update_order",method:"post",data:e}),Zn=200,Ec=0,B=(e=!0,t)=>r=>{switch(r.code){case Zn:e==="data"&&r.data&&typeof r.data=="string"?he.success(r.data):e===!0?he.success(r.msg):typeof e=="string"&&he.success(e),t==null||t(r.data);break;case Ec:he.error(r.msg)}},W=e=>t=>{try{const r=JSON.parse(t);r.code!==Zn&&r.msg&&he.error(String(r.msg))}catch(r){const s=String(r);s&&he.error(`发生错误了: ${s}`)}},cr=[{label:"友情链接",value:"friend_link"},{label:"顶部链接",value:"top_link"}],Xn=({show:e=!0,className:t="",text:r="加载中..."})=>e?c.jsxs("div",{className:$t("text-pending text-base",t),children:[c.jsx("i",{className:"i-svg-spinners-bars-rotate-fade"}),c.jsx("span",{className:"am ml1 select-none",children:r})]}):null,Fc=({data:e,labelKey:t,className:r="",onSort:s=Ta})=>{const[n,i]=_.useState([]);_.useEffect(()=>{i([...e||[]])},[e]);const o=Ei(us(Di),us(Ai,{coordinateGetter:ki}));function a(u){const{active:l,over:h}=u;h&&l.id!==h.id&&i(d=>{const f=d.findIndex(p=>p.id===l.id),g=d.findIndex(p=>p.id===h.id),v=Ni(d,f,g);return s(v),v})}return c.jsx("div",{className:$t(r,"flex flex-col items-start"),children:c.jsx(Fi,{sensors:o,collisionDetection:Ii,onDragEnd:a,children:c.jsx(Li,{items:n,strategy:Oi,children:n.map((u,l)=>c.jsx(Ic,{data:u,labelKey:t},u.id))})})})},Ic=({labelKey:e,data:t})=>{const{attributes:r,listeners:s,setNodeRef:n,transform:i,transition:o}=Mi({id:t.id}),a={transform:Ti.Transform.toString(i),transition:o};return c.jsxs("div",{ref:n,className:"cmn-text cursor-grab select-none max-w-full inline-flex items-start",style:a,...r,...s,children:[c.jsx("i",{className:"i-carbon-drag-vertical"}),c.jsx("span",{className:"am truncate flex-1 ml-1",children:t[e]})]})},ss=({loadData:e,labelKey:t="name",disabled:r=!1,loading:s=!1,key:n,onOk:i})=>{const[o,a]=_.useState(!1),{data:u,isPending:l}=et({queryKey:["load-data",n],queryFn:()=>e(),enabled:o}),[h,d]=_.useState((u==null?void 0:u.data)||[]);return _.useEffect(()=>d((u==null?void 0:u.data)||[]),[u]),c.jsx(Re,{showArrow:!0,visible:o,position:"bottomRight",trigger:"custom",content:c.jsxs("div",{className:"p2 min-w-40 space-y-3",children:[c.jsx("h3",{className:"fw-bold text-base",children:"更新顺序"}),c.jsx(sn,{margin:10}),c.jsx(Xn,{show:l,className:"w-full py-2 text-center"}),c.jsx(Fc,{className:"p1 max-w-60 max-h-40 overflow-y-auto",data:h,labelKey:t,onSort:f=>d(f)}),c.jsx(O,{block:!0,disabled:l,loading:s,onClick:()=>{i(h)},children:"确定"})]}),children:c.jsx(O,{disabled:r,icon:c.jsx(mi,{}),onClick:()=>a(!o)})})},{Checkbox:Ds,Input:Ns}=fe,Lc=e=>c.jsxs(c.Fragment,{children:[c.jsx(Ns,{field:"name",label:"名称",placeholder:"请输入名称",rules:[{required:!0,message:"必填"}]}),c.jsx(Ns,{field:"link",label:"链接",placeholder:"请输入链接",rules:[{required:!0,message:"必填"}]}),c.jsxs("div",{className:"flex gap2 justify-between",children:[c.jsx(Ds,{label:"打开",field:"open_blank",rules:[{required:!0,message:"必填"}],children:"新窗口打开"}),c.jsx(Ds,{label:"启用",field:"enable",rules:[{required:!0,message:"必填"}],children:"启用后显示"})]})]}),{Select:Oc}=fe,Yn=({defaultKind:e,title:t,children:r,className:s="",initValues:n,onSubmit:i})=>{const[o,a]=_.useState(e);return c.jsxs("div",{children:[c.jsx("h5",{className:"fw-bold text-base mb4",children:t}),c.jsxs(fe,{initValues:n,className:$t(s),onSubmit:u=>{var l;i({...u,label:(l=cr.find(h=>h.value=u.kind))==null?void 0:l.label,key:on.md5(JSON.stringify(u)),value:JSON.stringify(u)})},children:[!e&&c.jsx(Oc,{field:"kind",label:"类型",onChange:u=>a(u),optionList:cr,className:"w-full",placeholder:"选择类型",rules:[{required:!0,message:"必填"}]}),["friend_link","top_link"].includes(o)&&c.jsx(Lc,{}),r]})]})},Mc=({onAdded:e})=>{const{mutate:t,isPending:r}=z({mutationFn:wc}),s=n=>{t({...n},{onSuccess:B("添加成功",()=>e==null?void 0:e()),onError:W()})};return c.jsx("div",{className:"p2 w-60",children:c.jsx(Yn,{title:"添加数据",onSubmit:s,children:c.jsx(O,{block:!0,loading:r,htmlType:"submit",children:"提交"})})})},Tc=({data:e,kind:t,onEdited:r})=>{const{mutate:s,isPending:n}=z({mutationFn:_c}),i=o=>{s({...o,key:on.md5(JSON.stringify(o)),id:e.id},{onSuccess:B(!0,()=>r==null?void 0:r()),onError:W()})};return c.jsx("div",{className:"p2",children:c.jsx(Yn,{title:"修改数据",onSubmit:i,initValues:JSON.parse(e.value),defaultKind:t,children:c.jsx(O,{block:!0,loading:n,htmlType:"submit",children:"提交"})})})},kc=e=>Ui(e).format("YYYY-MM-DD HH:mm:ss"),Ac=()=>{const[e,t]=_.useState(cr[0].value),[r,s]=_.useState(1),[n,i]=_.useState(10),{data:o,isLoading:a,isFetching:u,refetch:l}=et({queryKey:["list-datalist",e,r,n],queryFn:()=>jc({kind:e,page:r,size:n})}),{mutate:h,isPending:d}=z({mutationFn:Cc}),f=b=>{h({id:b},{onSuccess:B("删除成功",()=>{l()}),onError:W()})},{mutate:g,isPending:v}=z({mutationFn:Pc}),p=b=>{const x=b.map((w,C)=>b.length-C);g({ids:b,orders:x},{onSuccess:B("更新成功",()=>{l()}),onError:W()})},y=[{title:"ID",dataIndex:"id",key:"id"},{title:"名称",dataIndex:"label",key:"label"},{title:"排序",dataIndex:"item_order",key:"item_order"},{title:"类别",dataIndex:"kind",key:"kind"},{title:"内容值",dataIndex:"value",key:"value"},{title:"创建",dataIndex:"create_time",key:"create_time",render(b){return c.jsx("span",{children:kc(b)})}},{title:"操作",key:"action",render:(b,x)=>c.jsxs("div",{className:"flex items-center gap2",children:[c.jsx(Br,{position:"bottomRight",title:"确认删除吗",content:"删除操作不可逆",onConfirm:()=>f(x.id),children:c.jsx(O,{type:"danger",icon:c.jsx(Kr,{}),size:"small",loading:d})}),c.jsx(Re,{showArrow:!0,position:"bottomRight",trigger:"click",content:c.jsx(Tc,{onEdited:()=>l(),data:x,kind:x.kind}),children:c.jsx(O,{icon:c.jsx(Hr,{}),size:"small"})})]})}];return c.jsx(c.Fragment,{children:c.jsx(Bt,{toolbar:c.jsxs("div",{className:"line-center justify-between flex-wrap",children:[c.jsx(zt,{className:"text-sm",children:"数据管理"}),c.jsxs("div",{className:"line-center gap-2 flex-wrap",children:[c.jsx(Lt,{value:e,className:"w-40",onChange:b=>t(b),optionList:cr,placeholder:"选择类型"}),c.jsx(ss,{disabled:!e,loadData:()=>new Promise((b,x)=>{Rc({kind:e}).then(w=>{const C=w.data.map(F=>({id:F.id,...JSON.parse(F.value)}));b({data:C})}).catch(w=>x(w))}),onOk:b=>p(b.map(x=>x.id)),loading:v},"load-datalist"),c.jsx(Re,{showArrow:!0,position:"bottomRight",trigger:"click",content:c.jsx(Mc,{}),children:c.jsx(O,{icon:c.jsx(qr,{})})}),c.jsx(O,{icon:c.jsx(qt,{}),onClick:()=>l(),loading:u})]})]}),children:c.jsx(Ct,{children:c.jsx(zr,{rowKey:"id",columns:y,dataSource:(o==null?void 0:o.data.list)||[],loading:a,pagination:{total:(o==null?void 0:o.data.total)||0,currentPage:r,pageSize:n,pageSizeOpts:[10,20,30,40,50],showSizeChanger:!0,onPageSizeChange:b=>{s(1),i(b)},onChange:(b,x)=>{s(b),i(x)}}})})})})},Dc=$e({getParentRoute:()=>Rt,component:()=>c.jsx(Ac,{}),path:"/data_list"}),Nc=e=>D({url:"/admin/v1/category/create",method:"post",data:e}),Uc=e=>D({url:"/admin/v1/category/update",method:"post",data:e}),ei=e=>D({url:"/v1/category/all",method:"get",params:e}),$c=e=>D({url:"/admin/v1/category/delete",method:"post",data:e}),qc=e=>D({url:"/admin/v1/category/update_order",method:"post",data:e}),zc=()=>D({url:"/admin/v1/category/sort_data",method:"get"});function Bc(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";const s=t.length;for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*s));return r}const{Upload:Kc,Input:Us}=fe,Hc=({onSuccess:e,initValues:t})=>{const r=_.useMemo(()=>Yr+"/admin/v1/upload/s3",[]),s=_.useRef(null),n=()=>{s.current.upload()};return c.jsx(c.Fragment,{children:c.jsx(fe,{initValues:t,onSubmit:n,render:({formState:i,formApi:o})=>c.jsxs(c.Fragment,{children:[c.jsx(Us,{field:"prefix",placeholder:"前缀",label:"前缀(path)",rules:[{required:!0,message:"必填"}]}),c.jsx(Us,{field:"object",placeholder:"文件名，不含后缀",label:"文件名(object)",rules:[{required:!0,message:"必填"}],extraText:c.jsx(c.Fragment,{children:c.jsx(xe.Text,{size:"small",link:!0,className:"cp",onClick:()=>{o.setValue("object",Bc(12))},children:"随机生成"})})}),c.jsx(Kc,{rules:[{required:!0,message:"必填"}],label:"上传文件(file)",uploadTrigger:"custom",field:"file",ref:s,action:r,data:{prefix:i.values.prefix,object:i.values.object},draggable:!0,headers:{Authorization:`Bearer ${localStorage.getItem(ar)}`},onSuccess:a=>{e==null||e(a)},addOnPasting:!0,fileName:"file",dragMainText:"点击上传文件或拖拽文件到这里",dragSubText:"支持任意类型文件"}),c.jsx(O,{htmlType:"submit",block:!0,children:"上传"})]})})})},ti=({prefix:e="images"})=>{const[t,r]=_.useState(!1),[s,n]=_.useState();return c.jsx(c.Fragment,{children:c.jsx(Re,{showArrow:!0,position:"bottomRight",trigger:"custom",visible:t,content:c.jsxs("div",{className:"p2 w-60 max-w-60",children:[c.jsx("h2",{className:"fw-bold text-base",children:"上传图片"}),c.jsx(Hc,{initValues:{prefix:e},onSuccess:i=>{n(i.data)}}),(s==null?void 0:s.url)&&c.jsxs("div",{className:"flex flex-col gap-2 mt3",children:[c.jsx(xe.Text,{className:"whitespace-pre-wrap break-all",copyable:{content:s==null?void 0:s.url},children:s==null?void 0:s.url}),c.jsx(xe.Text,{className:"whitespace-pre-wrap break-all",copyable:{content:s==null?void 0:s.key},children:s==null?void 0:s.key})]})]}),children:c.jsx(O,{icon:c.jsx(pi,{}),onClick:()=>r(!t)})})})},ri=[{label:"无序",value:""},{label:"降序",value:"desc"},{label:"升序",value:"asc"}];function ns(e){const t=new Map,r=[];return e.forEach(s=>{t.set(s.id,s)}),e.forEach(s=>{if(s.parent_id===null||s.parent_id===void 0)r.push(s);else{const n=t.get(s.parent_id);n&&(n.children||(n.children=[])).push(s)}}),r}const{TreeSelect:Qc,TextArea:Vc,Input:$s,Slider:Wc}=fe,si=({category:e,categories:t})=>{const r=_.useMemo(()=>{const s=t.map(n=>({parent_id:n.parent_id,label:n.name,value:n.id,id:n.id,key:`${n.parent_id||0}-${n.id}`}));return ns(s)},[t]);return c.jsxs(c.Fragment,{children:[c.jsx($s,{field:"name",label:"名称",placeholder:"请输入名称",rules:[{required:!0,message:"必填"}]}),c.jsx($s,{field:"image",label:"图片",placeholder:"请输入图片地址"}),c.jsx(Vc,{field:"description",label:"描述",placeholder:"请输入描述"}),c.jsx(Qc,{className:"w-full ovh",placeholder:"请选择父分类",field:"pid",label:"父分类",defaultExpandAll:!0,maxTagCount:1,checkRelation:"unRelated",treeData:r}),c.jsx(Wc,{label:"权重排序",field:"item_order",min:1,max:100,showBoundary:!1})]})},Kt=({children:e,className:t="",title:r,initValues:s,onSubmit:n})=>c.jsxs("div",{children:[c.jsx("h5",{className:"fw-bold text-base",children:r}),c.jsx(fe,{initValues:s,className:t,onSubmit:n,children:e})]}),Gc=({categories:e,onAdded:t})=>{const{mutate:r,isPending:s}=z({mutationFn:Nc}),n=i=>{r(i,{onSuccess:B(!0,()=>t==null?void 0:t()),onError:W()})};return c.jsx("div",{className:"p2 w-62",children:c.jsxs(Kt,{title:"添加分类",onSubmit:n,children:[c.jsx(si,{categories:e}),c.jsx(O,{block:!0,loading:s,htmlType:"submit",children:"提交"})]})})},Jc=({categories:e,category:t,onEdited:r})=>{const{mutate:s,isPending:n}=z({mutationFn:Uc}),i=o=>{s(o,{onSuccess:B(!0,()=>r==null?void 0:r()),onError:W()})};return c.jsx("div",{className:"p2 w-62",children:c.jsxs(Kt,{title:"修改分类",onSubmit:i,initValues:t,children:[c.jsx(si,{categories:e,category:t}),c.jsx(O,{block:!0,loading:n,htmlType:"submit",children:"提交"})]})})},Zc=e=>{const[t,r]=_.useState("desc"),{data:s,isLoading:n,isFetching:i,refetch:o}=et({queryKey:["list_category",t],queryFn:()=>ei({by_order:t})}),a=_.useMemo(()=>ns((s==null?void 0:s.data)||[]),[s==null?void 0:s.data]),{mutate:u,isPending:l}=z({mutationFn:$c}),h=p=>{u({id:p},{onSuccess:B("删除成功",()=>{o()}),onError:W()})},{mutate:d,isPending:f}=z({mutationFn:qc}),g=p=>{const y=p.map((b,x)=>p.length-x);d({ids:p,orders:y},{onSuccess:B("更新成功",()=>{o()}),onError:W()})},v=[{title:"分类名称",dataIndex:"name",key:"name"},{title:"分类描述",dataIndex:"description",key:"description"},{title:"权重排序",dataIndex:"item_order",key:"item_order"},{title:"操作",key:"action",render:(p,y)=>c.jsxs("div",{className:"flex items-center gap2",children:[c.jsx(Br,{position:"bottomRight",title:"确认删除吗",content:"需要该分类下没有子分类且没有站点所属",onConfirm:()=>h(y.id),children:c.jsx(O,{type:"danger",icon:c.jsx(Kr,{}),size:"small",loading:l})}),c.jsx(Re,{showArrow:!0,position:"bottomRight",trigger:"click",content:c.jsx(Jc,{onEdited:()=>o(),category:y,categories:(s==null?void 0:s.data)||[]}),children:c.jsx(O,{icon:c.jsx(Hr,{}),size:"small"})})]})}];return c.jsx(c.Fragment,{children:c.jsx(Bt,{toolbar:c.jsxs("div",{className:"line-center justify-between flex-wrap",children:[c.jsx(zt,{className:"text-sm",children:"分类管理"}),c.jsxs("div",{className:"line-center gap-2 flex-wrap",children:[c.jsx(Lt,{className:"w-24",placeholder:"权重排序",onChange:p=>{r(p)},value:t,optionList:ri}),c.jsx(ti,{}),c.jsx(ss,{loading:f,loadData:zc,onOk:p=>g(p.map(y=>y.id))},"load-cate"),c.jsx(Re,{showArrow:!0,position:"bottomRight",trigger:"click",content:c.jsx(Gc,{onAdded:()=>o(),categories:(s==null?void 0:s.data)||[]}),children:c.jsx(O,{icon:c.jsx(qr,{})})}),c.jsx(O,{icon:c.jsx(qt,{}),onClick:()=>o(),loading:i})]})]}),children:c.jsx(Ct,{children:c.jsx(zr,{rowKey:"id",columns:v,dataSource:a,defaultExpandAllRows:a.length!=0,loading:n,pagination:!1})})})})},Xc=$e({getParentRoute:()=>Rt,component:()=>c.jsx(Zc,{}),path:"/list_category"}),Yc=e=>D({url:"/admin/v1/site/update",method:"post",data:e}),ni=e=>D({url:"/admin/v1/site/create",method:"post",data:e}),el=e=>D({url:"/admin/v1/site/meta",method:"get",params:e}),tl=e=>D({url:"/admin/v1/site/list",method:"get",params:e}),rl=e=>D({url:"/admin/v1/site/upload_icon",method:"post",data:e}),sl=e=>D({url:"/admin/v1/site/delete",method:"post",data:e}),nl=e=>D({url:"/admin/v1/site/update_order",method:"post",data:e}),il=e=>D({url:"/admin/v1/site/sort_data",method:"get",params:e}),ol=e=>D({url:"/admin/v1/site_config/write_file",method:"post",data:e}),qs=({text:e,size:t="small",width:r=320})=>{const s=_.useCallback((n,i)=>c.jsx(gi,{content:n,children:i}),[]);return c.jsx(xe.Text,{size:t,style:{width:r},ellipsis:{showTooltip:{renderTooltip:s}},children:e})};function al(){var e=_.useRef(!1),t=_.useCallback(function(){return e.current},[]);return _.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}var cl=function(e){e===void 0&&(e={});var t=_.useState(e),r=t[0],s=t[1],n=_.useCallback(function(i){s(function(o){return Object.assign({},o,i instanceof Function?i(o):i)})},[]);return[r,n]},zs=function(){},ll=typeof window<"u",ul=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],s=0;s<e.rangeCount;s++)r.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(n){e.addRange(n)}),t&&t.focus()}},dl=ul,Bs={"text/plain":"Text","text/html":"Url",default:"Text"},hl="Copy to clipboard: #{key}, Enter";function fl(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function ml(e,t){var r,s,n,i,o,a,u=!1;t||(t={}),r=t.debug||!1;try{n=dl(),i=document.createRange(),o=document.getSelection(),a=document.createElement("span"),a.textContent=e,a.ariaHidden="true",a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(h){if(h.stopPropagation(),t.format)if(h.preventDefault(),typeof h.clipboardData>"u"){window.clipboardData.clearData();var d=Bs[t.format]||Bs.default;window.clipboardData.setData(d,e)}else h.clipboardData.clearData(),h.clipboardData.setData(t.format,e);t.onCopy&&(h.preventDefault(),t.onCopy(h.clipboardData))}),document.body.appendChild(a),i.selectNodeContents(a),o.addRange(i);var l=document.execCommand("copy");if(!l)throw new Error("copy command was unsuccessful");u=!0}catch{try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch{s=fl("message"in t?t.message:hl),window.prompt(s,e)}}finally{o&&(typeof o.removeRange=="function"?o.removeRange(i):o.removeAllRanges()),a&&document.body.removeChild(a),n()}return u}var pl=ml;const gl=Vr(pl);var yl=function(){var e=al(),t=cl({value:void 0,error:void 0,noUserInteraction:!0}),r=t[0],s=t[1],n=_.useCallback(function(i){if(e()){var o,a;try{if(typeof i!="string"&&typeof i!="number"){var u=new Error("Cannot copy typeof "+typeof i+" to clipboard, must be a string");s({value:i,error:u,noUserInteraction:!0});return}else if(i===""){var u=new Error("Cannot copy empty string to clipboard.");s({value:i,error:u,noUserInteraction:!0});return}a=i.toString(),o=gl(a),s({value:a,error:void 0,noUserInteraction:o})}catch(l){s({value:a,error:l,noUserInteraction:o})}}},[]);return[r,n]},vl=function(e,t,r){if(!ll)return[t,zs,zs];var s=JSON.parse,n=_.useRef(function(h){try{var d=r?r.raw?String:r.serializer:JSON.stringify,f=localStorage.getItem(h);return f!==null?s(f):(t&&localStorage.setItem(h,d(t)),t)}catch{return t}}),i=_.useState(function(){return n.current(e)}),o=i[0],a=i[1];_.useLayoutEffect(function(){return a(n.current(e))},[e]);var u=_.useCallback(function(h){try{var d=typeof h=="function"?h(o):h;if(typeof d>"u")return;var f=void 0;r||(f=JSON.stringify(d)),localStorage.setItem(e,f),a(s(f))}catch{}},[e,a]),l=_.useCallback(function(){try{localStorage.removeItem(e),a(void 0)}catch{}},[e,a]);return[o,u,l]};const ii=()=>{const[e,t]=yl();return _.useEffect(()=>{if(e.value){e.value.length<5?he.success(`复制成功: ${e.value}`):he.success("复制成功");return}e.error&&he.error(String(e.error))},[e]),t};var bl=function(t,r){r===!0&&(r=0);var s="";if(typeof t=="string")try{s=new URL(t).protocol}catch{}else t&&t.constructor===URL&&(s=t.protocol);var n=s.split(/\:|\+/).filter(Boolean);return typeof r=="number"?n[r]:n},xl=bl;function Sl(e){var t={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:e,query:{},parse_failed:!1};try{var r=new URL(e);t.protocols=xl(r),t.protocol=t.protocols[0],t.port=r.port,t.resource=r.hostname,t.host=r.host,t.user=r.username||"",t.password=r.password||"",t.pathname=r.pathname,t.hash=r.hash.slice(1),t.search=r.search.slice(1),t.href=r.href,t.query=Object.fromEntries(r.searchParams)}catch{t.protocols=["file"],t.protocol=t.protocols[0],t.port="",t.resource="",t.user="",t.pathname="",t.hash="",t.search="",t.href=e,t.query={},t.parse_failed=!0}return t}var wl=Sl;const _l=Vr(wl);function jl(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){if(this instanceof s){var n=[null];n.push.apply(n,arguments);var i=Function.bind.apply(t,n);return new i}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),r}var oi={};const Cl="text/plain",Rl="us-ascii",Ks=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),Pl=(e,{stripHash:t})=>{const r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:s,data:n,hash:i}=r.groups;const o=s.split(";");i=t?"":i;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);const u=(o.shift()||"").toLowerCase(),h=[...o.map(d=>{let[f,g=""]=d.split("=").map(v=>v.trim());return f==="charset"&&(g=g.toLowerCase(),g===Rl)?"":`${f}${g?`=${g}`:""}`}).filter(Boolean)];return a&&h.push("base64"),(h.length>0||u&&u!==Cl)&&h.unshift(u),`data:${h.join(";")},${a?n.trim():n}${i?`#${i}`:""}`};function El(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return Pl(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");const r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const n=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),t.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash?n.hash="":t.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){const o=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let a=0,u="";for(;;){const h=o.exec(n.pathname);if(!h)break;const d=h[0],f=h.index,g=n.pathname.slice(a,f);u+=g.replace(/\/{2,}/g,"/"),u+=d,a=f+d.length}const l=n.pathname.slice(a,n.pathname.length);u+=l.replace(/\/{2,}/g,"/"),n.pathname=u}if(n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let o=n.pathname.split("/");const a=o[o.length-1];Ks(a,t.removeDirectoryIndex)&&(o=o.slice(0,-1),n.pathname=o.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const o of[...n.searchParams.keys()])Ks(o,t.removeQueryParameters)&&n.searchParams.delete(o);if(t.removeQueryParameters===!0&&(n.search=""),t.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}}t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));const i=e;return e=n.toString(),!t.removeSingleSlash&&n.pathname==="/"&&!i.endsWith("/")&&n.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var Fl=Object.freeze({__proto__:null,default:El}),Il=jl(Fl);Object.defineProperty(oi,"__esModule",{value:!0});var Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol=Il,Ml=ai(Ol),Tl=_l,kl=ai(Tl);function ai(e){return e&&e.__esModule?e:{default:e}}var ci=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,n=function(u){var l=new Error(u);throw l.subject_url=t,l};(typeof t!="string"||!t.trim())&&n("Invalid url."),t.length>e.MAX_INPUT_LENGTH&&n("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":Ll(r))!=="object"&&(r={stripHash:!1}),t=(0,Ml.default)(t,r));var i=(0,kl.default)(t);if(i.parse_failed){var o=i.href.match(s);o?(i.protocols=["ssh"],i.protocol="ssh",i.resource=o[2],i.host=o[2],i.user=o[1],i.pathname="/"+o[3],i.parse_failed=!1):n("URL parsing failed.")}return i};ci.MAX_INPUT_LENGTH=2048;var li=oi.default=ci;const Hs=e=>{if(e.trim()==="")return"";const t=li(e);return`${t.protocol}://${t.resource}${t.pathname}`},Qs=e=>e.trim()===""?"":li(e).resource,{TreeSelect:Al,TextArea:Dl,Slider:Nl,Checkbox:Ul,Input:Xt}=fe,is=({categories:e})=>{const[t,r]=vl(Ma,!1),s=ii(),n=yi(),i=nn(),o=_.useMemo(()=>{const v=e.map(p=>({parent_id:p.parent_id,label:p.name,value:p.id,id:p.id,key:`${p.parent_id||0}-${p.id}`}));return ns(v)},[e]),a=_.useMemo(()=>{var v,p;return(v=i.values.icon)!=null&&v.startsWith("http")?i.values.icon:(p=i.values.icon)!=null&&p.startsWith("favicon/")?ka+i.values.icon:"/static/logo.svg"},[i]),{mutate:u,isPending:l}=z({mutationFn:el}),h=()=>{u({url:n.getValue("url")},{onSuccess:B("采集成功",v=>{v.title&&n.setValue("name",v.title),v.keywords&&n.setValue("keywords",v.keywords),v.description&&n.setValue("description",v.description),v.favicon&&n.setValue("icon",v.favicon)})})},{mutate:d,isPending:f}=z({mutationFn:rl}),g=()=>{d({icon_url:n.getValue("icon"),site_url:n.getValue("url")},{onSuccess:B("上传成功",v=>{n.setValue("icon",v)})})};return c.jsxs(c.Fragment,{children:[c.jsx(Xt,{field:"url",label:"站点地址",placeholder:"请输入站点地址",rules:[{required:!0,message:"必填"}],onBlur:()=>{t&&n.setValue("url",Hs(i.values.url))},extraText:c.jsx("p",{children:c.jsx(xe.Text,{size:"small",link:!0,onClick:()=>{n.setValue("url",Hs(i.values.url))},children:"清理URL"})}),addonAfter:c.jsx(O,{disabled:!i.values.url,loading:l,onClick:h,icon:c.jsx(qt,{})})}),c.jsx(Xt,{field:"name",label:"名称",placeholder:"请输入名称",rules:[{required:!0,message:"必填"}]}),c.jsx(Xt,{field:"keywords",label:"关键词",placeholder:"请输入关键词,分隔",rules:[{required:!0,message:"必填"}]}),c.jsx(Xt,{field:"icon",label:"图标",placeholder:"请输入图标",rules:[{required:!0,message:"必填"}],extraText:c.jsxs("p",{className:"flex gap-2",children:[c.jsx(xe.Text,{size:"small",disabled:!i.values.url,link:!0,onClick:()=>{n.setValue("icon",`https://api.iowen.cn/favicon/${Qs(i.values.url)}.png`)},children:"Api①"}),c.jsx(xe.Text,{size:"small",disabled:!i.values.url,link:!0,onClick:()=>{n.setValue("icon",`https://www.google.com/s2/favicons?domain=${Qs(i.values.url)}&sz=128`)},children:"Api②"})]}),addonBefore:c.jsx("img",{width:30,height:30,className:"px1 cp",onClick:()=>s(a),src:a,alt:"icon"}),addonAfter:c.jsx(O,{disabled:!i.values.icon,onClick:g,loading:f,icon:c.jsx(vi,{})})}),c.jsx(Al,{className:"w-full",placeholder:"请选择分类",field:"category_id",label:"请选择分类",defaultExpandAll:!0,maxTagCount:1,checkRelation:"unRelated",multiple:!0,rules:[{required:!0,message:"必填"}],treeData:o}),c.jsx(Dl,{field:"description",rules:[{required:!0,message:"必填"}],label:"描述",placeholder:"请输入描述"}),c.jsx(Nl,{label:"权重排序",field:"item_order",min:1,max:100,showBoundary:!1}),c.jsx(Ul,{noLabel:!0,field:"clean",initValue:t,onChange:v=>r(v.target.checked),children:"自动清理URL"})]})},$l=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)/gi;function ql(e,t){const r=[];let s;for(;(s=$l.exec(e))!==null;){const n=s[0].replace(/\/$/,"");t(n)&&r.push(n)}return zl(r)}function zl(e){return Array.from(new Set(e))}const Bl=({categories:e,onAdded:t})=>{const[r,s]=_.useState(""),[n,i]=_.useState(),[o,a]=_.useState([]),u=ii(),{mutate:l,isPending:h}=z({mutationFn:ni}),d=f=>{l({...f,keywords:f.keywords.split(",")},{onSuccess:B(!0,()=>t==null?void 0:t()),onError:W()})};return c.jsxs("div",{className:"p2 space-y-3 w-130",children:[c.jsx("h2",{className:"text-base fw-bold",children:"批量解析站点"}),c.jsxs("div",{className:"w-100 space-y-3",children:[c.jsx(bi,{value:r,onBlur:()=>{const f=ql(r,g=>!g.match(/(jpg|png|jpeg|gif|svg|html)$/));a(f)},onChange:f=>s(f),placeholder:"输入html代码段"}),c.jsx(Lt,{value:n,onChange:f=>{u(f),i(f)},className:"w-full max-w-full",position:"bottomRight",optionList:o.map(f=>({label:f,value:f})),placeholder:"解析的地址"})]}),c.jsx(sn,{margin:10}),c.jsx("div",{children:c.jsxs(Kt,{className:"grid grid-cols-2 gap-3",title:"添加站点",onSubmit:d,children:[c.jsx(is,{categories:e}),c.jsx(O,{block:!0,loading:h,htmlType:"submit",children:"提交"})]})})]})},ui=Array.isArray,Kl=({categories:e,onAdded:t})=>{const{mutate:r,isPending:s}=z({mutationFn:ni}),n=i=>{r({...i,keywords:ui(i.keywords)?i.keywords:i.keywords.split(",")},{onSuccess:B(!0,()=>t==null?void 0:t()),onError:W()})};return c.jsx("div",{className:"p2 w-130",children:c.jsxs(Kt,{className:"grid grid-cols-2 gap-3",title:"添加站点",onSubmit:n,children:[c.jsx(is,{categories:e}),c.jsx(O,{block:!0,loading:s,htmlType:"submit",children:"提交"})]})})},Hl=({data:e,categories:t,onEdited:r})=>{var o;const{mutate:s,isPending:n}=z({mutationFn:Yc}),i=a=>{s({...a,keywords:ui(a.keywords)?a.keywords:a.keywords.split(",")},{onSuccess:B(!0,()=>r==null?void 0:r()),onError:W()})};return c.jsx("div",{className:"p2 w-120",children:c.jsxs(Kt,{className:"grid grid-cols-2 gap-3",title:"修改站点",onSubmit:i,initValues:{...e,category_id:(o=e.edges)==null?void 0:o.cates.map(a=>a.id)},children:[c.jsx(is,{categories:t}),c.jsx(O,{block:!0,loading:n,htmlType:"submit",children:"提交"})]})})},Ql=e=>{var k;const[t,r]=_.useState(!1),[s,n]=_.useState("desc"),[i,o]=_.useState(1),[a,u]=_.useState(10),[l,h]=_.useState(0),{data:d}=et({queryKey:["list_category"],queryFn:()=>ei({by_order:"desc"})}),{data:f,isLoading:g,refetch:v,isFetching:p}=et({queryKey:["list-sites",l,i,a,s],queryFn:()=>tl({page:i,size:a,category_id:l,by_order:s})}),{mutate:y,isPending:b}=z({mutationFn:sl}),x=S=>{y({id:S},{onSuccess:B("删除成功",()=>{v()}),onError:W()})},{mutate:w,isPending:C}=z({mutationFn:nl}),F=S=>{const P=S.map((K,Z)=>S.length-Z);w({ids:S,orders:P},{onSuccess:B("更新成功",()=>{v()}),onError:W()})},T=[{title:"站点名称",dataIndex:"name",key:"name",width:300,render:(S,P)=>c.jsxs("div",{className:"flex items-center gap2",children:[c.jsx("img",{src:P.icon,alt:P.name,width:20,height:20,className:"rd-full"}),c.jsx("span",{children:P.name})]})},{title:"权重",dataIndex:"item_order",key:"item_order"},{title:"地址",dataIndex:"url",key:"url"},{title:"描述",dataIndex:"description",key:"description",width:300,render(S){return c.jsx(qs,{width:300,text:S})}},{title:"关键词",dataIndex:"keywords",key:"keywords",width:300,render(S){return c.jsx(qs,{width:300,text:S==null?void 0:S.join(",")})}},{title:"操作",key:"action",render:(S,P)=>c.jsxs("div",{className:"flex items-center gap2",children:[c.jsx(Br,{position:"bottomRight",title:"确认删除吗",content:"这将同时删除站点所属分类关系",onConfirm:()=>x(P.id),children:c.jsx(O,{type:"danger",icon:c.jsx(Kr,{}),size:"small",loading:b})}),c.jsx(Re,{showArrow:!0,position:"bottomRight",trigger:"click",content:c.jsx(Hl,{onEdited:()=>v(),data:P,categories:(d==null?void 0:d.data)||[]}),children:c.jsx(O,{icon:c.jsx(Hr,{}),size:"small"})})]})}];return c.jsx(c.Fragment,{children:c.jsx(Bt,{toolbar:c.jsxs("div",{className:"line-center justify-between flex-wrap",children:[c.jsx(zt,{className:"text-sm",children:"站点列表"}),c.jsxs("div",{className:"line-center gap-2 flex-wrap",children:[c.jsx(Re,{visible:t,showArrow:!0,position:"bottomRight",trigger:"custom",content:c.jsx(Bl,{onAdded:()=>v(),categories:(d==null?void 0:d.data)||[]}),children:c.jsx(O,{onClick:()=>r(!t),icon:c.jsx(xi,{})})}),c.jsx(Re,{showArrow:!0,position:"bottomRight",trigger:"click",content:c.jsx(Kl,{onAdded:()=>v(),categories:(d==null?void 0:d.data)||[]}),children:c.jsx(O,{icon:c.jsx(qr,{})})}),c.jsx(Lt,{className:"w-24",placeholder:"权重排序",onChange:S=>{o(1),n(S)},value:s,optionList:ri}),c.jsx(Lt,{className:"w-40",position:"bottomRight",placeholder:"选择分类",showClear:!0,value:l===0?void 0:l,onChange:S=>{o(1),h(S)},optionList:(k=d==null?void 0:d.data)==null?void 0:k.map(S=>({value:S.id,label:S.name}))}),c.jsx(ss,{disabled:l===0,loadData:()=>il({pid:l}),onOk:S=>F(S.map(P=>P.id)),loading:C},"load-site"),c.jsx(O,{icon:c.jsx(qt,{}),onClick:()=>v(),loading:p})]})]}),children:c.jsx(Ct,{children:c.jsx(zr,{rowKey:"id",columns:T,dataSource:(f==null?void 0:f.data.list)||[],loading:g,pagination:{total:(f==null?void 0:f.data.total)||0,currentPage:i,pageSize:a,pageSizeOpts:[10,20,30,40,50],showSizeChanger:!0,onPageSizeChange:S=>{o(1),u(S)},onChange:(S,P)=>{o(S),u(P)}}})})})})},Vl=$e({getParentRoute:()=>Rt,component:()=>c.jsx(Ql,{}),path:"/list_site"}),Wl=()=>D({url:"/admin/v1/site_config/all",method:"get"}),Gl=e=>D({url:"/admin/v1/site_config/update",method:"post",data:e}),Jl=()=>D({url:"/admin/v1/site_config/gen_sitemap",method:"get"}),Zl=({children:e,show:t=!0})=>t?c.jsx(c.Fragment,{children:e}):null,di=({children:e,className:t="",initValues:r,onSubmit:s})=>c.jsx(c.Fragment,{children:c.jsx(fe,{initValues:r,className:t,onSubmit:s,children:e})}),{TextArea:Xl}=fe,Yl=({className:e})=>{const{mutate:t,isPending:r}=z({mutationFn:ol}),s=(i,o)=>{t({filename:i,data:o},{onSuccess:B("保存成功"),onError:W()})},n=nn();return c.jsx("div",{className:$t(e),children:c.jsx(Xl,{field:"robots",label:"Robots",placeholder:"请输入Robots规则",autosize:{minRows:1,maxRows:10},rules:[{required:!0,message:"必填"}],extraText:c.jsxs("p",{className:"flex gap-2",children:[c.jsx(xe.Text,{size:"small",link:!0,icon:r?c.jsx(Si,{spin:!0}):c.jsx(Qr,{}),onClick:()=>s("robots.txt",n.values.robots),children:"保存文件"}),c.jsx(xe.Text,{size:"small",link:{href:"/robots.txt",target:"_blank"},icon:c.jsx(wi,{}),children:"访问"})]})})})},eu=({className:e="",isLoading:t,value:r,configKey:s,onSave:n})=>{const i=JSON.parse(r),{mutate:o,isPending:a}=z({mutationFn:Jl}),u=()=>{o(void 0,{onSuccess:B("data"),onError:W()})};return c.jsx("div",{className:e,children:c.jsxs(di,{initValues:i,onSubmit:l=>{n==null||n(s,JSON.stringify(l))},children:[c.jsx(Yl,{className:"grid grid-cols-2 gap4"}),c.jsxs("div",{className:"flex gap2",children:[c.jsx(O,{type:"primary",htmlType:"submit",icon:c.jsx(Qr,{}),loading:t,children:"提交"}),c.jsx(O,{type:"warning",onClick:u,loading:a,children:"生成站点地图"})]})]})})},{TextArea:_r,Input:Be,Select:tu}=fe,ru=({className:e})=>c.jsxs("div",{className:$t(e),children:[c.jsx(Be,{field:"site_name",label:"站点名称",placeholder:"请输入站点名称",rules:[{required:!0,message:"必填"}]}),c.jsx(Be,{field:"site_url",label:"站点 URL",placeholder:"请输入站点 URL",rules:[{required:!0,message:"必填"}]}),c.jsx(Be,{field:"site_title",label:"站点标题",placeholder:"请输入站点标题",rules:[{required:!0,message:"必填"}]}),c.jsx(Be,{field:"sub_title",label:"副标题",placeholder:"请输入副标题",rules:[{required:!0,message:"必填"}]}),c.jsx(Be,{field:"main_title",label:"主页标题",placeholder:"请输入主页标题",rules:[{required:!0,message:"必填"}]}),c.jsx(Be,{field:"site_image",label:"站点图片",placeholder:"主要用于Open Graph"}),c.jsx(Be,{field:"site_logo",label:"站点Logo",placeholder:"请输入站点Logo",rules:[{required:!0,message:"必填"}]}),c.jsx(tu,{className:"w-full",allowCreate:!0,multiple:!0,filter:!0,field:"site_keywords",label:"站点关键词",placeholder:"请输入站点关键词，以逗号分隔",rules:[{required:!0,message:"必填"}]}),c.jsx(_r,{field:"site_desc",label:"站点描述",placeholder:"请输入站点描述",rules:[{required:!0,message:"必填"}]}),c.jsx(_r,{field:"disclaimer",label:"免责声明",placeholder:"请输入免责声明",rules:[{required:!0,message:"必填"}]}),c.jsx(_r,{field:"site_meta_script",autosize:{minRows:1,maxRows:10},label:"站点 Meta Script",placeholder:"请输入站点 Meta Script"})]}),su=({className:e="",isLoading:t,value:r,configKey:s,onSave:n})=>{const i=JSON.parse(r);return c.jsx("div",{className:e,children:c.jsxs(di,{initValues:i,onSubmit:o=>{n==null||n(s,JSON.stringify(o))},children:[c.jsx(ru,{className:"grid grid-cols-2 gap4"}),c.jsx(O,{type:"primary",htmlType:"submit",icon:c.jsx(Qr,{}),loading:t,children:"提交"})]})})},nu=()=>{var a,u;const{data:e,isLoading:t,refetch:r,isFetching:s}=et({queryKey:["list-all-configs"],queryFn:()=>Wl()}),{mutate:n,isPending:i}=z({mutationFn:Gl}),o=(l,h)=>{n({name:l,config:h},{onSuccess:B("保存成功",()=>r()),onError:W()})};return c.jsx(c.Fragment,{children:c.jsx(Bt,{toolbar:c.jsxs("div",{className:"line-center justify-between flex-wrap",children:[c.jsx(zt,{className:"text-sm",children:"站点配置"}),c.jsxs("div",{className:"line-center gap-2 flex-wrap",children:[c.jsx(ti,{prefix:"attachment"}),c.jsx(O,{icon:c.jsx(qt,{}),onClick:()=>r(),loading:s})]})]}),children:c.jsxs(Ct,{children:[c.jsx(Xn,{show:t,className:"block-center my2"}),c.jsx(Zl,{show:!t,children:c.jsxs(_i,{type:"line",defaultActiveKey:"site-config",children:[c.jsx(ls,{tab:"站点配置",itemKey:"site-config",children:c.jsx(su,{isLoading:t||i,className:"w-160",value:((a=e==null?void 0:e.data)==null?void 0:a.site_info)||"{}",configKey:"site_info",onSave:o})}),c.jsx(ls,{tab:"SEO配置",itemKey:"seo-config",children:c.jsx(eu,{isLoading:t||i,className:"w-160",value:((u=e==null?void 0:e.data)==null?void 0:u.seo_config)||"{}",configKey:"seo_config",onSave:o})})]})})]})})})},iu=$e({getParentRoute:()=>Rt,component:()=>c.jsx(nu,{}),path:"/site_config"}),ou="data:image/svg+xml,%3csvg%20viewBox='0%200%20400%20300'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M292.021%20106.277H84.88v150.736H292.02V106.277Z'%20fill='%23EFF2F4'/%3e%3cpath%20d='M308.576%2080.227H101.435v150.736h207.141V80.227Z'%20fill='%23D6DAE1'/%3e%3cpath%20d='M146.476%2090.391c5.317%200%209.628-4.31%209.628-9.628%200-5.318-4.311-9.629-9.628-9.629a9.628%209.628%200%200%200-9.628%209.629%209.628%209.628%200%200%200%209.628%209.628Z'%20fill='%23005DFF'/%3e%3cpath%20d='M102.371%20114.969h204.948M157.574%2097.184h66.328'%20stroke='%23fff'%20stroke-width='2.568'%20stroke-miterlimit='10'/%3e%3cpath%20d='m156.719%20188.655-26.077%207.295-3.293-11.773%2017.404-38.292%2012.476-3.49%208.859%2031.664%206.467-1.809%203.106%2011.105-6.466%201.809%202.694%209.63-12.476%203.49-2.694-9.629Zm-3.107-11.106-4.533-16.201-9.243%2020.056%2013.776-3.855ZM187.857%20177.331c-.789-10.138.478-17.375%203.801-21.708%203.348-4.336%208.757-6.795%2016.227-7.376%203.59-.279%206.572-.06%208.946.658%202.372.694%204.342%201.7%205.909%203.018%201.564%201.293%202.821%202.696%203.768%204.209.97%201.486%201.79%203.252%202.462%205.298%201.304%203.901%202.124%208.01%202.46%2012.327.753%209.678-.333%2016.888-3.258%2021.63-2.925%204.743-8.39%207.425-16.394%208.048-4.488.349-8.169-.084-11.046-1.3-2.876-1.216-5.308-3.138-7.293-5.765-1.439-1.865-2.654-4.466-3.646-7.806-.97-3.365-1.615-7.109-1.936-11.233Zm14.702-1.107c.528%206.791%201.484%2011.39%202.867%2013.796%201.405%202.38%203.248%203.481%205.528%203.303%201.504-.117%202.761-.739%203.771-1.867%201.033-1.154%201.715-2.891%202.047-5.211.356-2.321.347-5.896-.029-10.722-.551-7.083-1.527-11.79-2.929-14.121-1.379-2.357-3.269-3.442-5.671-3.256-2.449.191-4.123%201.578-5.02%204.161-.899%202.559-1.087%207.198-.564%2013.917ZM268.565%20183.058l-26.865-3.389%201.531-12.13%2030.893-28.544%2012.853%201.621-4.115%2032.622%206.662.84-1.443%2011.441-6.662-.84-1.252%209.921-12.853-1.622%201.251-9.92Zm1.444-11.442%202.105-16.691-16.298%2014.901%2014.193%201.79Z'%20fill='%23fff'/%3e%3cpath%20d='M293.92%20270.894c21.358%200%2038.673-17.315%2038.673-38.674%200-21.358-17.315-38.673-38.673-38.673-21.359%200-38.674%2017.315-38.674%2038.673%200%2021.359%2017.315%2038.674%2038.674%2038.674Z'%20fill='%23FF3640'/%3e%3cpath%20d='M69.343%2032.3s-1.07%2075.448-1.337%2092.592c-.294%2021.53%2010.698%2025.755%2019.203%2020.219'%20stroke='%23231815'%20stroke-width='2.354'%20stroke-miterlimit='10'/%3e%3cpath%20d='M87.287%20110.77s-1.31%2039.556-.134%2045.895c1.82%209.949%2016.369%208.023%2016.369-1.364'%20stroke='%23231815'%20stroke-width='2.354'%20stroke-miterlimit='10'/%3e%3cpath%20d='M104.11%20116.013s-.856%2034.982-.589%2041.749c.455%2011.554%2020.113%2012.918%2019.043-6.259'%20stroke='%23231815'%20stroke-width='2.354'%20stroke-miterlimit='10'/%3e%3cpath%20d='M151.61%2080.602c-10.217-2.46-11.554%2020.487-11.634%2031.639-.08%2011.153%202.915%2028.404.321%2040.332s-18.107%2010.698-18.24-1.979c0-5.349.401-36.935.401-36.935M177.633%2079.933c-4.252-22.84-33.565-21.048-33.565-21.048V30'%20stroke='%23231815'%20stroke-width='2.354'%20stroke-miterlimit='10'/%3e%3cpath%20d='M270.599%20240.297s20.299-27.12%2049.13-1.311'%20stroke='%23fff'%20stroke-width='2.407'%20stroke-miterlimit='10'/%3e%3c/svg%3e",au="admin-main_Djkfh",cu="admin-main-header_keb9W",lu="admin-main-content_aAMtI",uu="admin-main-sider_PQmYL",du="admin-main-sider-nav_77SJE",hu="admin-main-right-cnt_RMBOX",fu="admin-main-footer_8Tkoa",mu="not-found-box_k4-Dp",pu="not-found_Pp-tc",gu="not-found-action_TfaDJ",yu="login-page_VzENM",vu="login-title_6mdpq",bu="login-box_ZF3pH",jr={"admin-main":"admin-main_Djkfh",adminMain:au,"admin-main-header":"admin-main-header_keb9W",adminMainHeader:cu,"admin-main-content":"admin-main-content_aAMtI",adminMainContent:lu,"admin-main-sider":"admin-main-sider_PQmYL",adminMainSider:uu,"admin-main-sider-nav":"admin-main-sider-nav_77SJE",adminMainSiderNav:du,"admin-main-right-cnt":"admin-main-right-cnt_RMBOX",adminMainRightCnt:hu,"admin-main-footer":"admin-main-footer_8Tkoa",adminMainFooter:fu,"not-found-box":"not-found-box_k4-Dp",notFoundBox:mu,"not-found":"not-found_Pp-tc",notFound:pu,"not-found-action":"not-found-action_TfaDJ",notFoundAction:gu,"login-page":"login-page_VzENM",loginPage:yu,"login-title":"login-title_6mdpq",loginTitle:vu,"login-box":"login-box_ZF3pH",loginBox:bu},hi=e=>{const t=Tn(),r=Ee(),s=()=>r.history.back();return c.jsx("section",{className:jr.notFoundBox,children:c.jsxs("div",{className:jr.notFound,children:[c.jsx(ji,{preview:!1,src:ou,alt:"you are in not-found page",width:300}),c.jsx(xe.Title,{heading:4,children:"你来到了一片荒芜"}),c.jsxs("div",{className:jr.notFoundAction,children:[c.jsx(O,{onClick:()=>t({to:"/"}),type:"tertiary",children:"返回首页"}),c.jsx(O,{onClick:s,children:"返回上页"})]})]})})},xu=$e({getParentRoute:()=>mr,path:"/",component:()=>c.jsx(_a,{to:"/admin"}),notFoundComponent:()=>c.jsx(hi,{})}),mr=ja()({notFoundComponent:()=>c.jsx(hi,{}),component:()=>c.jsx(c.Fragment,{children:c.jsx(Nn,{})})}),Rt=$e({getParentRoute:()=>mr,path:"/admin",beforeLoad:({context:e,location:t})=>{if(!e.logged)throw aa({to:"/login",search:{redirect:t.href}})}}).lazy(()=>Jn(()=>import("./AdminPage-Cpy3gmqc.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>e.default)),Su=$e({getParentRoute:()=>mr,path:"/login"}).lazy(()=>Jn(()=>import("./LoginPage-Dx_-Dy-h.js"),__vite__mapDeps([5,1,2,3,4])).then(e=>e.default)),wu=mr.addChildren([xu,Su,Rt,Sc,Xc,Vl,iu,Dc]),_u=Co(),ju=fa({routeTree:wu,context:void 0,history:_u}),Cu=new io({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});function Ru(){const e=hc();return c.jsx(Oa,{router:ju,context:e})}const Pu=()=>c.jsx(c.Fragment,{children:c.jsx(uo,{client:Cu,children:c.jsx(Bi,{children:c.jsx(dc,{children:c.jsx(Ru,{})})})})});an(document.getElementById("root")).render(c.jsx(Pu,{}));export{Nn as O,qi as a,Tn as b,hc as c,jr as d,z as e,W as f,_t as g,wa as h,Sa as i,ba as j,xa as k,B as o,Ou as p,ce as u};
